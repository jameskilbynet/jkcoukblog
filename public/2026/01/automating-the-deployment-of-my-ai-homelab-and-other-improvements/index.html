<!DOCTYPE html><html class="no-js" itemscope="" itemtype="https://schema.org/Blog" lang="en-GB" prefix="og: https://ogp.me/ns#"><head><link as="image" href="/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png" rel="preload" type="image/png"/><link href="//jameskilby.co.uk" rel="dns-prefetch"/><link href="//utteranc.es" rel="dns-prefetch"/><style id="critical-css">.wp-block-image>a,.wp-block-image>figure>a{display:inline-block}.wp-block-image img{box-sizing:border-box;height:auto;max-width:100%;vertical-align:bottom}}.wp-block-image[style*=border-radius] img,.wp-block-image[style*=border-radius]>a{border-radius:inherit}.wp-block-image.has-custom-border img{box-sizing:border-box}.wp-block-image.alignfull>a,.wp-block-image.alignwide>a{width:100%}.wp-block-image.alignfull img,.wp-block-image.alignwide img{height:auto;width:100%}.wp-block-image.is-style-circle-mask img{border-radius:9999px}.wp-lightbox-container img{cursor:zoom-in}.wp-lightbox-container img:hover+button{opacity:1}.wp-lightbox-overlay .wp-block-image img{height:var(--wp--lightbox-image-height);min-height:var(--wp--lightbox-image-height);min-width:var(--wp--lightbox-image-width);width:var(--wp--lightbox-image-width)}.wp-lightbox-overlay.active img{animation:turn-on-visibility .35s both}.wp-lightbox-overlay.show-closing-animation:not(.active) img{animation:turn-off-visibility .25s both}.wp-lightbox-overlay.zoom.active .lightbox-image-container img{animation:none}.wp-lightbox-overlay.zoom.show-closing-animation:not(.active) .lightbox-image-container img{animation:none}body{background-color:var(--bg-dark) !important;color:var(--text-light) !important;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif !important;line-height:1.6;margin:0;padding:0}.site-header,#masthead{background-color:var(--bg-dark) !important;border-bottom:2px solid var(--gray-mid)}a{color:var(--accent-orange) !important;text-decoration:none !important}.content-area,.site-container{background-color:var(--bg-dark) !important}.entry,article{background-color:rgba(255,255,255,0.02) !important;border:1px solid var(--gray-mid) !important}img{max-width:100%;height:auto;display:block}.wp-site-blocks,#wrapper,.site,main,#main{background-color:var(--bg-dark) !important}h1{font-size:2rem !important}h2{font-size:1.5rem !important}h3{font-size:1.25rem !important}img:is([sizes=auto i],[sizes^="auto," i]){contain-intrinsic-size:3000px 1500px}html:where(.has-border-color){border-style:solid}html:where([style*=border-top-color]){border-top-style:solid}html:where([style*=border-right-color]){border-right-style:solid}html:where([style*=border-bottom-color]){border-bottom-style:solid}html:where([style*=border-left-color]){border-left-style:solid}html:where([style*=border-width]){border-style:solid}html:where([style*=border-top-width]){border-top-style:solid}html:where([style*=border-right-width]){border-right-style:solid}html:where([style*=border-bottom-width]){border-bottom-style:solid}html:where([style*=border-left-width]){border-left-style:solid}html:where(img[class*=wp-image-]){height:auto;max-width:100%}html:where(.is-position-sticky){--wp-admin--admin-bar--position-offset:var(--wp-admin--admin-bar--height,0px)}:where(p.has-text-color:not(.has-link-color)) a{color:inherit}body .is-layout-flex{display:flex}body .is-layout-grid{display:grid}body::before{content:"";position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;opacity:0.03;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")}}h1,h2,h3,h4,h5,h6,.site-title,.entry-title{font-family:"Anton",sans-serif !important;font-weight:400 !important;letter-spacing:0.02em;text-transform:uppercase;color:var(--text-light) !important}h1,.site-title{font-size:3rem !important}h2,.entry-title{font-size:2.25rem !important}h3{font-size:1.75rem !important}}a{color:var(--accent-orange) !important;text-decoration:none !important;transition:opacity 0.2s ease}a:hover{opacity:0.8;text-decoration:underline !important}a:focus{outline:2px solid var(--accent-orange);outline-offset:2px}.site-header,#masthead{background-color:var(--bg-dark) !important;border-bottom:2px solid var(--gray-mid)}.site-branding .site-title a,.site-title{color:var(--text-light) !important}.main-navigation a,.menu-item a{color:var(--text-light) !important;font-weight:500;text-transform:uppercase;font-size:0.9rem;letter-spacing:0.05em}.menu-item a:hover{color:var(--accent-orange) !important}.main-navigation a:focus,.main-navigation a:focus-visible,.menu-item a:focus,.menu-item a:focus-visible{outline:2px solid var(--accent-orange);outline-offset:2px;color:var(--accent-orange) !important}.content-bg,.entry,article{background-color:rgba(255,255,255,0.02) !important;border:1px solid var(--gray-mid) !important;border-radius:0 !important}.entry-content,.entry-summary,.entry-header{color:var(--text-light) !important}.entry-summary p,.entry-content p{color:var(--gray-light) !important;line-height:1.7}.loop-entry .entry-summary p,.entry-list-item .entry-summary p{display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;overflow:hidden}.entry-meta a{color:var(--gray-light) !important}.entry-meta a:hover{color:var(--accent-orange) !important}.category-links a,.tag-links a{background-color:transparent !important;border:1px solid var(--gray-mid) !important;color:var(--text-light) !important;padding:0.5rem 0.875rem;border-radius:0;font-size:0.75rem;text-transform:uppercase;letter-spacing:0.05em;display:inline-flex;align-items:center;min-height:44px;box-sizing:border-box;white-space:nowrap}.category-links a:hover,.tag-links a:hover{background-color:var(--accent-orange) !important;border-color:var(--accent-orange) !important;color:var(--bg-dark) !important}.category-links a:focus,.tag-links a:focus,.category-links a:focus-visible,.tag-links a:focus-visible{outline:2px solid var(--accent-orange);outline-offset:2px;background-color:var(--accent-orange) !important;border-color:var(--accent-orange) !important;color:var(--bg-dark) !important}img{border:1px solid var(--gray-mid);max-width:100%;height:auto;display:block}.post-thumbnail-inner img{width:100%;height:100%;object-fit:cover;object-position:center top}.entry-content .wp-block-image img,.entry-content figure img{max-width:100%;height:auto;margin:0 auto;object-fit:contain}.post-thumbnail img{transition:opacity 0.3s ease}.post-thumbnail:hover img{opacity:0.85}.entry-header,.post-title{background-color:var(--bg-dark) !important;padding:1.5rem !important;margin:0 !important}.loop-entry .entry-header,.entry-list-item .entry-header{padding:1rem 1.5rem !important}.site-mobile-header-wrap .site-header-row-container-inner,.site-mobile-header-wrap .site-container,.site-mobile-header-wrap .site-header-row{background-color:var(--bg-dark) !important}.popup-drawer .menu-item a,.mobile-drawer-content .menu-item a{color:var(--text-light) !important;padding:1rem 1.5rem !important;display:block !important;min-height:44px;font-size:1rem;font-weight:500;text-transform:uppercase;letter-spacing:0.05em;text-decoration:none !important}.popup-drawer .menu-item a:hover,.popup-drawer .menu-item a:focus,.mobile-drawer-content .menu-item a:hover,.mobile-drawer-content .menu-item a:focus{background-color:rgba(246,130,31,0.1) !important;color:var(--accent-orange) !important}.mobile-navigation,.mobile-navigation-content{background-color:var(--bg-dark) !important}.mobile-navigation .menu-item a{color:var(--text-light) !important;padding:1rem 1.5rem !important;min-height:44px;display:flex;align-items:center}.mobile-navigation .menu-item a:hover{color:var(--accent-orange) !important;background-color:rgba(246,130,31,0.1) !important}.pagination a,.page-numbers{background-color:transparent !important;border:1px solid var(--gray-mid) !important;color:var(--text-light) !important;padding:0.5rem 1rem;margin:0 0.25rem}.pagination a:hover,.page-numbers:hover,.page-numbers.current{background-color:var(--accent-orange) !important;border-color:var(--accent-orange) !important;color:var(--bg-dark) !important}.pagination a:focus,.pagination a:focus-visible,.page-numbers:focus,.page-numbers:focus-visible{outline:2px solid var(--accent-orange);outline-offset:2px;background-color:var(--accent-orange) !important;border-color:var(--accent-orange) !important;color:var(--bg-dark) !important}.post-navigation,.navigation,.nav-links{background-color:transparent !important;padding:2rem 0 !important;border-top:1px solid var(--gray-mid) !important;margin-top:3rem !important}.post-navigation a,.navigation a{background-color:rgba(255,255,255,0.02) !important;border:1px solid var(--gray-mid) !important;padding:1.5rem !important;display:block !important;color:var(--text-light) !important}.post-navigation a:hover,.navigation a:hover{background-color:rgba(255,255,255,0.05) !important;border-color:var(--accent-orange) !important}.post-navigation a:focus,.post-navigation a:focus-visible,.navigation a:focus,.navigation a:focus-visible{outline:2px solid var(--accent-orange);outline-offset:2px;background-color:rgba(255,255,255,0.05) !important;border-color:var(--accent-orange) !important}h2,.entry-title{font-size:1.5rem !important}h3{font-size:1.25rem !important}.loop-entry .entry-summary p,.entry-list-item .entry-summary p{-webkit-line-clamp:3}h2,.entry-title{font-size:1.25rem !important}h3{font-size:1.125rem !important}.category-links a,.tag-links a{padding:0.5rem 0.75rem !important;font-size:0.7rem !important;min-height:44px !important}.entry-header,.entry-content{padding:1rem !important}.loop-entry .entry-summary p,.entry-list-item .entry-summary p{-webkit-line-clamp:2}h2,.entry-title{font-size:1.125rem !important}h3{font-size:1rem !important}.entry-header,.entry-content{padding:0.75rem !important}body{line-height:1.5 !important}.category-links a,.tag-links a{padding:0.4rem 0.6rem !important;font-size:0.65rem !important;min-height:44px !important}a,button,.post-more-link,.wp-block-button__link,.category-links a,.tag-links a,.post-thumbnail img,.menu-item a,.page-numbers,.pagination a,.post-navigation a,.navigation a,input,textarea{transition:background-color 0.2s ease,color 0.2s ease,border-color 0.2s ease,opacity 0.2s ease}.wp-site-blocks,#wrapper,.site,.content-area,.site-container,.site-footer-wrap,.site-bottom-footer-wrap,.footer-widget-area,.site-info,footer,#colophon,.carousel,.slider,.slick-slider,.splide,.swiper,.wp-block-gallery,.blocks-gallery-grid,.navigation,.post-navigation,.pagination-wrap,.content-wrap,main,#main,#inner-wrap,.wrap{background-color:var(--bg-dark) !important}div,section,aside,nav{background-color:transparent !important}</style><link as="style" href="/wp-content/cache/wpo-minify/1770231741/assets/wpo-minify-header-60a11f4e.min.css" rel="preload"/><link as="style" href="/wp-content/themes/kadence/assets/css/rankmath.min.css" rel="preload"/><link as="style" href="/wp-content/themes/kadence/assets/css/footer.min.css" rel="preload"/><link as="style" href="/wp-content/themes/kadence/assets/css/kadence-splide.min.css" rel="preload"/><link as="style" href="/wp-content/themes/kadence/assets/css/related-posts.min.css" rel="preload"/><link as="font" crossorigin="anonymous" href="/assets/fonts/spacegrotesk-v22-latin-500.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="/assets/fonts/spacegrotesk-v22-latin-400.woff2" rel="preload" type="font/woff2"/><link as="font" crossorigin="anonymous" href="/assets/fonts/anton-v27-latin-400.woff2" rel="preload" type="font/woff2"/><link href="//plausible.jameskilby.cloud" rel="dns-prefetch"/><link crossorigin="" href="https://plausible.jameskilby.cloud" rel="preconnect"/><link as="script" href="/wp-content/cache/wpo-minify/1770231741/assets/wpo-minify-footer-20d41812.min.js" rel="preload"/><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1, minimum-scale=1" name="viewport"/><title>Automating The Deployment Of My Homelab AI Infrastructure...</title><meta content="How I use Ansible automation to deploy my AI Infrastucture Jameskilbycouk" name="description"/><meta content="index, follow, max-snippet:-1, max-video-preview:-1, max-image-preview:large" name="robots"/><link href="/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/" rel="canonical"/><meta content="en_GB" property="og:locale"/><meta content="article" property="og:type"/><meta content="Automating The Deployment Of My Homelab AI Infrastructure - Jameskilbycouk" property="og:title"/><meta content="How I use Ansible automation to deploy my AI Infrastucture" property="og:description"/><meta content="/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/" property="og:url"/><meta content="Jameskilbycouk" property="og:site_name"/><meta content="AI" property="article:tag"><meta content="Docker" property="article:tag"><meta content="Homelab" property="article:tag"/><meta content="Nvidia" property="article:tag"/><meta content="Semaphore" property="article:tag"/><meta content="Ansible" property="article:section"/><meta content="2026-02-08T22:56:47+00:00" property="og:updated_time"/><meta content="/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png" property="og:image"/><meta content="/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png" property="og:image:secure_url"/><meta content="1920" property="og:image:width"/><meta content="1080" property="og:image:height"/><meta content="Automating the deployment of my Homelab AI Infrastructure" property="og:image:alt"/><meta content="image/png" property="og:image:type"/><meta content="2026-01-15T21:19:58+00:00" property="article:published_time"/><meta content="2026-02-08T22:56:47+00:00" property="article:modified_time"/><meta content="summary_large_image" name="twitter:card"/><meta content="Automating The Deployment Of My Homelab AI Infrastructure - Jameskilbycouk" name="twitter:title"/><meta content="How I use Ansible automation to deploy my AI Infrastucture" name="twitter:description"/><meta content="/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png" name="twitter:image"/><meta content="Written by" name="twitter:label1"/><meta content="James" name="twitter:data1"/><meta content="Time to read" name="twitter:label2"/><meta content="15 minutes" name="twitter:data2"/>
<script class="rank-math-schema" type="application/ld+json">{"@context":"https://schema.org","@graph":[[{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"GPU vs vGPU","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#gpu-vs-v-gpu"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Pre req&#039;s","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#pre-reqs"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Host Setup","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#h"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"vGPU Profiles","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#v-gpu-profiles"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Guest Setup","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#guest-setup"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Ansible Details","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#ansible-details"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"1. Docker deployment","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#docker-deployment"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"2. Install NVIDIA Guest Drivers","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#windows"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"NVIDIA Guest Driver Variables","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#nvidia-guest-driver-variables"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"3.Install NVIDIA Container Toolkit","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#install-nvidia-container-toolkit"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"4. Install Traefik","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#install-traefik"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Traefik Variable Definitions","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#variable-definitions"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Ansible Secrets","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#ansible-secrets"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Semaphore End to End Setup","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#implementation"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Repository","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#repository"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Key Store","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#key-store"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Inventory","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#inventory"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Variable Group","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#variable-group"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Task Templates","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#task-templates"},{"@context":"https://schema.org","@type":"SiteNavigationElement","@id":"#rank-math-toc","name":"Conclusion","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#conclusion"}],{"@type":["Person","Organization"],"@id":"/#person","name":"Jameskilbycouk","logo":{"@type":"ImageObject","@id":"/#logo","url":"/wp-content/uploads/2025/12/ChatGPT-Image-Dec-17-2025-at-09_03_10-PM.png","contentUrl":"/wp-content/uploads/2025/12/ChatGPT-Image-Dec-17-2025-at-09_03_10-PM.png","caption":"Jameskilbycouk","inLanguage":"en-GB","width":"1024","height":"1024"},"image":{"@type":"ImageObject","@id":"/#logo","url":"/wp-content/uploads/2025/12/ChatGPT-Image-Dec-17-2025-at-09_03_10-PM.png","contentUrl":"/wp-content/uploads/2025/12/ChatGPT-Image-Dec-17-2025-at-09_03_10-PM.png","caption":"Jameskilbycouk","inLanguage":"en-GB","width":"1024","height":"1024"},"url":"https://jameskilby.co.uk"},{"@type":"WebSite","@id":"/#website","url":"https://jameskilby.co.uk","name":"Jameskilbycouk","publisher":{"@id":"/#person"},"inLanguage":"en-GB"},{"@type":"ImageObject","@id":"/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png","url":"/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png","width":"1920","height":"1080","inLanguage":"en-GB"},{"@type":"BreadcrumbList","@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#breadcrumb","itemListElement":[{"@type":"ListItem","position":"1","item":{"@id":"https://jameskilby.co.uk","name":"Home"}},{"@type":"ListItem","position":"2","item":{"@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/","name":"Automating the deployment of my Homelab AI  Infrastructure"}}]},{"@type":"WebPage","@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#webpage","url":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/","name":"Automating The Deployment Of My Homelab AI Infrastructure - Jameskilbycouk","datePublished":"2026-01-15T21:19:58+00:00","dateModified":"2026-02-08T22:56:47+00:00","isPartOf":{"@id":"/#website"},"primaryImageOfPage":{"@id":"/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png"},"inLanguage":"en-GB","breadcrumb":{"@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#breadcrumb"}},{"@type":"Person","@id":"/author/admin/","name":"James","url":"/author/admin/","image":{"@type":"ImageObject","@id":"https://secure.gravatar.com/avatar/ef6adff58705e646065437e05c1828dd80a8f03997f0a97cf2b109df4eafd7aa?s=96&amp;d=mm&amp;r=g","url":"https://secure.gravatar.com/avatar/ef6adff58705e646065437e05c1828dd80a8f03997f0a97cf2b109df4eafd7aa?s=96&amp;d=mm&amp;r=g","caption":"James","inLanguage":"en-GB"},"sameAs":["https://wordpress.jameskilby.cloud"]},{"@type":"BlogPosting","headline":"Automating The Deployment Of My Homelab AI Infrastructure - Jameskilbycouk","keywords":"Automating the deployment of my Homelab AI Infrastructure","datePublished":"2026-01-15T21:19:58+00:00","dateModified":"2026-02-08T22:56:47+00:00","author":{"@id":"/author/admin/","name":"James"},"publisher":{"@id":"/#person"},"description":"How I use Ansible automation to deploy my AI Infrastucture","name":"Automating The Deployment Of My Homelab AI Infrastructure - Jameskilbycouk","@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#richSnippet","isPartOf":{"@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#webpage"},"image":{"@id":"/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png"},"inLanguage":"en-GB","mainEntityOfPage":{"@id":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/#webpage"},"wordCount":2811,"timeRequired":"PT14M","articleBody":"In a previous post , I wrote about using my VMware lab with an NVIDIA Tesla P4 for running some AI services. This deployment was done with the GPU in walkthrough mode (I will refer to this as GPU). I wanted to take this to the next level. I also wanted to automate most of the steps. This was for a few reasons, firstly I wanted to get better at automating in general. Secondly, I found the setup brittle and wanted to improve the reliability of deployments. This post will be about using automation to deploying of the VM infrastructure required to be able to run AI Workloads. I also decided to bite the bullet and update the graphics card I was using to something a bit more modern and capable. After a bit of searching I decided on an NVIDIA A10 This post is about getting the foundational infrastructure ready. The first part will explain the steps and detail the Ansible configuration. The second part of this post goes into a full deployment utilising SemaphoreUI. My next post will go into more details on the Docker containers I am using for actually running the AI services building on these foundations. All of the code is referenced in my GitHub IAC repository Table of Contents GPU vs vGPU For anyone not familiar, it may be worth giving an overview of the differences between GPU and vGPU. What I describe as ‚ÄúGPU‚Äù is where I am passing the entire Graphics PCI device through to a single VM within vSphere. Using this method has some advantages, firstly, it doesn‚Äôt require any special licences or drivers. The entire PCI card gets passed into the VM as is. However, it has some downsides. The two most important ones for me are that it can only be presented to a single VM at a time and that VM cannot be snapshotted while it is turned on. This made backups convoluted. As I was changing configurations a lot this became tedious. I also wanted to be able to pass the card through to multiple VM‚Äôs vGPU is only officially supported on ‚Äúdatacentre‚Äù cards from NVIDIA it virtualizes the graphics card and allows you to share it across multiple VM‚Äôs in a similar way to what vSphere has done for compute virtualization for years. It allows you to split the card into some predefined profiles that I have listed below and attach them to multiple virtual machines at the same time. Pre req‚Äôs There are quite a lot of pre-reqs required to be in place to utilise all the attached deployment playbooks. So it‚Äôs worth ensuring that all of these are complete. Obviously, you need a vSphere Host and vCentre server licensed at least at the enterprise level (I am using Enterprise Plus on 8.0u3) An Ubuntu VM (Tested with 25.04) referred to as the vGPU VM A NVIDIA datacenter Graphics card and associated Host and Guest drivers, I am using an A10 24GB and using driver version 535.247.0 NVIDIA vGPU licence. Trials are available here if needed NFS Server (used for NVIDIA software deployment) A Domain hosted with Cloudflare and an API token with Zone:DNS:Edit permissions. SSH access to the vGPU VM with SUDO permission Somewhere to run Ansible playbooks from. Internal DNS Records created for vGPU VM Traefik Dashboard Test NGINX Server ‚Äì Optional NFS Server (Used for vGPU Software install) Host Setup To make vGPU work successfully, there are three elements required. The first is that the vSphere host has the driver installed. For now, I‚Äôm using the ‚Äò535‚Äô version of the driver, which is the LTS version.` To utilise vGPU with vSphere you need an NVIDIA account to obtain the software. Once this has been obtained, you need to copy the host driver to a VMware datastore. Place the host in maintenance mode and then install the driver. esxcli software vib install -d /vmfs/volumes/02cb3d2b-457ccb84/nvidia/NVIDIA-GRID-vSphere-8.0-535.247.02-535.247.01-539.28.zip If it worked successfully, you should get a result like the below Installation Result Message: Operation finished successfully. VIBs Installed: NVD_bootbank_NVD-VMware_ESXi_8.0.0_Driver_535.247.02-1OEM.800.1.0.20613240 VIBs Removed: VIBs Skipped: Reboot Required: false DPU Results: I always choose to restart the host after installing the driver. I have been bitten in the past where it says a reboot isn‚Äôt required but it was. Once the host has restarted, ssh into it and validate that the driver is talking to the GPU correctly. This can be done with the nvidia-smi command. This is executed on the ESXi host and will show something similar to the below if it‚Äôs working. +---------------------------------------------------------------------------------------+ | NVIDIA-SMI 535.247.02 Driver Version: 535.247.02 CUDA Version: N/A | |-----------------------------------------+----------------------+----------------------+ | GPU Name Persistence-M | Bus-Id Disp.A | Volatile Uncorr. ECC | | Fan Temp Perf Pwr:Usage/Cap | Memory-Usage | GPU-Util Compute M. | | | | MIG M. | |=========================================+======================+======================| | 0 NVIDIA A10 On | 00000000:03:00.0 Off | 0 | | 0% 41C P8 22W / "}]}</script>
<link href="/feed/" rel="alternate" title="Jameskilbycouk ¬ª Feed" type="application/rss+xml"/><link href="/comments/feed/" rel="alternate" title="Jameskilbycouk ¬ª Comments Feed" type="application/rss+xml"/>
<script>document.documentElement.classList.remove( 'no-js' );</script>
<link href="/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/feed/" rel="alternate" title="Jameskilbycouk ¬ª Automating the deployment of my Homelab AI Infrastructure Comments Feed" type="application/rss+xml"/><link href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwordpress.jameskilby.cloud%2F2026%2F01%2Fautomating-the-deployment-of-my-ai-homelab-and-other-improvements%2F" rel="alternate" title="oEmbed (JSON)" type="application/json+oembed"/><link href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwordpress.jameskilby.cloud%2F2026%2F01%2Fautomating-the-deployment-of-my-ai-homelab-and-other-improvements%2F&amp;format=xml" rel="alternate" title="oEmbed (XML)" type="text/xml+oembed"/><link as="style" href="/assets/css/wp-block-image-inline-css-9dcc7ddb.min.css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/assets/css/wp-block-image-inline-css-9dcc7ddb.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/assets/css/consolidated-inline-styles.min.css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/assets/css/consolidated-inline-styles.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/assets/css/wp-block-list-inline-css-597eaa17.min.css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/assets/css/wp-block-list-inline-css-597eaa17.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/assets/css/wp-block-code-inline-css-d1d93800.min.css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/assets/css/wp-block-code-inline-css-d1d93800.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/wp-content/themes/kadence/assets/css/related-posts.min.css" id="kadence-related-posts-css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/wp-content/themes/kadence/assets/css/related-posts.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/wp-content/themes/kadence/assets/css/kadence-splide.min.css" id="kad-splide-css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/wp-content/themes/kadence/assets/css/kadence-splide.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/wp-content/themes/kadence/assets/css/footer.min.css" id="kadence-footer-css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/wp-content/themes/kadence/assets/css/footer.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/wp-content/themes/kadence/assets/css/rankmath.min.css" id="kadence-rankmath-css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/wp-content/themes/kadence/assets/css/rankmath.min.css" media="all" rel="stylesheet"/></noscript><link as="style" href="/wp-content/cache/wpo-minify/1770231741/assets/wpo-minify-header-60a11f4e.min.css" id="wpo_min-header-0-css" media="all" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/><noscript><link href="/wp-content/cache/wpo-minify/1770231741/assets/wpo-minify-header-60a11f4e.min.css" media="all" rel="stylesheet"/></noscript><link href="/wp-json/wp/v2/posts/7306" rel="alternate" title="JSON" type="application/json"/><link href="/?p=7306" rel="shortlink"/><link href="/xmlrpc.php" rel="pingback"/></meta></meta><meta content="max-age=86400" http-equiv="Cache-Control"/><meta content="WordPress Static Generator 1.0" name="generator"/><meta content="#0a0a0a" name="theme-color"/><link href="/favicon.ico" rel="icon" type="image/x-icon"/><link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/><link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/><link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/><link href="/site.webmanifest" rel="manifest"/><link as="style" href="/assets/css/brutalist-theme.css" rel="preload"/><link href="/assets/css/brutalist-theme.css" media="all" rel="stylesheet"/><script data-cfasync="false" data-domain="jameskilby.co.uk" defer="" src="https://plausible.jameskilby.cloud/js/script.js"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://jameskilby.co.uk"},{"@type":"ListItem","position":2,"name":"Ansible","item":"/category/ansible/"},{"@type":"ListItem","position":3,"name":"Automating the deployment of my Homelab AI  Infrastructure","item":"/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/"}]}</script></head><body class="wp-singular post-template-default single single-post postid-7306 single-format-standard wp-embed-responsive wp-theme-kadence hide-focus-outline link-style-standard content-title-style-normal content-width-narrow content-style-boxed content-vertical-padding-show non-transparent-header mobile-non-transparent-header"><div class="site wp-site-blocks" id="wrapper"><a class="skip-link screen-reader-text scroll-ignore" href="#main">Skip to content</a><header class="site-header" id="masthead" itemscope="" itemtype="https://schema.org/WPHeader" role="banner"><div class="site-header-wrap" id="main-header"><div class="site-header-inner-wrap"><div class="site-header-upper-wrap"><div class="site-header-upper-inner-wrap"><div class="site-main-header-wrap site-header-row-container site-header-focus-item site-header-row-layout-standard" data-section="kadence_customizer_header_main"><div class="site-header-row-container-inner"><div class="site-container"><div class="site-main-header-inner-wrap site-header-row site-header-row-has-sides site-header-row-no-center"><div class="site-header-main-section-left site-header-section site-header-section-left"><div class="site-header-item site-header-focus-item" data-section="title_tagline"><div class="site-branding branding-layout-standard"><a class="brand" href="/" rel="home"><div class="site-title-wrap"><p class="site-title">Jameskilbycouk</p></div></a></div></div></div><div class="site-header-main-section-right site-header-section site-header-section-right"><div class="site-header-item site-header-focus-item site-header-item-main-navigation header-navigation-layout-stretch-false header-navigation-layout-fill-stretch-false" data-section="kadence_customizer_primary_navigation"><nav aria-label="Primary" class="main-navigation header-navigation hover-to-open nav--toggle-sub header-navigation-style-standard header-navigation-dropdown-animation-none" id="site-navigation" role="navigation"><div class="primary-menu-container header-menu-container"><ul class="menu" id="primary-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7329" id="menu-item-7329"><a href="/about-me/">About Me</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7324" id="menu-item-7324"><a href="/evs/">AWS EVS</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7325" id="menu-item-7325"><a href="/vmc/">VMC</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7327" id="menu-item-7327"><a href="/media/">Media</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7326" id="menu-item-7326"><a href="/homelab-software/">HomeLab ‚Äì Software</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7328" id="menu-item-7328"><a href="/lab/">Homelab ‚Äì Hardware</a></li></ul></div></nav></div></div></div></div></div></div></div></div></div></div><div class="site-mobile-header-wrap" id="mobile-header"><div class="site-header-inner-wrap"><div class="site-header-upper-wrap"><div class="site-header-upper-inner-wrap"><div class="site-main-header-wrap site-header-focus-item site-header-row-layout-standard site-header-row-tablet-layout-default site-header-row-mobile-layout-default"><div class="site-header-row-container-inner"><div class="site-container"><div class="site-main-header-inner-wrap site-header-row site-header-row-has-sides site-header-row-no-center"><div class="site-header-main-section-left site-header-section site-header-section-left"><div class="site-header-item site-header-focus-item" data-section="title_tagline"><div class="site-branding mobile-site-branding branding-layout-standard branding-tablet-layout-inherit branding-mobile-layout-inherit"><a class="brand" href="/" rel="home"><div class="site-title-wrap"><div class="site-title vs-md-false">Jameskilbycouk</div></div></a></div></div></div><div class="site-header-main-section-right site-header-section site-header-section-right"><div class="site-header-item site-header-focus-item site-header-item-navgation-popup-toggle" data-section="kadence_customizer_mobile_trigger"><div class="mobile-toggle-open-container"><button aria-expanded="false" aria-label="Open menu" class="menu-toggle-open drawer-toggle menu-toggle-style-default" data-set-focus=".menu-toggle-close" data-toggle-body-class="showing-popup-drawer-from-right" data-toggle-target="#mobile-drawer" id="mobile-toggle"><span class="menu-toggle-icon"><span class="kadence-svg-iconset"><svg aria-hidden="true" class="kadence-svg-icon kadence-menu-svg" fill="currentColor" height="24" version="1.1" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><title>Toggle Menu</title><path d="M3 13h18c0.552 0 1-0.448 1-1s-0.448-1-1-1h-18c-0.552 0-1 0.448-1 1s0.448 1 1 1zM3 7h18c0.552 0 1-0.448 1-1s-0.448-1-1-1h-18c-0.552 0-1 0.448-1 1s0.448 1 1 1zM3 19h18c0.552 0 1-0.448 1-1s-0.448-1-1-1h-18c-0.552 0-1 0.448-1 1s0.448 1 1 1z"></path></svg></span></span></button></div></div></div></div></div></div></div></div></div></div></div></header><main class="wrap kt-clear" id="inner-wrap" role="main"><nav aria-label="Breadcrumb" class="breadcrumb-navigation site-container"><ol class="breadcrumb-list"><li style="display: inline-flex; align-items: center;"><a class="breadcrumb-link" href="https://jameskilby.co.uk">Home</a></li><li style="display: inline-flex; align-items: center;"><span class="breadcrumb-separator">/</span><a class="breadcrumb-link" href="/category/ansible/">Ansible</a></li><li style="display: inline-flex; align-items: center;"><span class="breadcrumb-separator">/</span><span aria-current="page" class="breadcrumb-current">Automating the deployment of my Homelab AI Infrastructure</span></li></ol></nav><div class="content-area" id="primary"><div class="content-container site-container"><div class="site-main" id="main"><div class="content-wrap"><div class="post-thumbnail article-post-thumbnail kadence-thumbnail-position-behind alignwide kadence-thumbnail-ratio-2-3"><div class="post-thumbnail-inner"><img alt="Vmware Nvidia Logos Ee2F18Dc 615D 4C9E 8F11 9C3C2Ce2Bf37 Prv" class="post-top-featured wp-post-image" decoding="async" fetchpriority="high" height="1080" loading="eager" sizes="(max-width: 1920px) 100vw, 1920px" src="/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png" srcset="/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv.png 1920w, /wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv-300x169.png 300w, /wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv-1024x576.png 1024w, /wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv-768x432.png 768w, /wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv-1536x864.png 1536w" width="1920"/></div></div><article class="entry content-bg single-entry post-7306 post type-post status-publish format-standard has-post-thumbnail hentry category-ansible category-artificial-intelligence category-containers category-devops category-homelab category-nvidia category-traefik category-vmware tag-ai tag-docker tag-homelab tag-nvidia tag-semaphore" id="post-7306"><div class="entry-content-wrap"><header class="entry-header post-title title-align-inherit title-tablet-align-inherit title-mobile-align-inherit"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a href="/category/ansible/" rel="tag">Ansible</a> | <a href="/category/artificial-intelligence/" rel="tag">Artificial Intelligence</a> | <a href="/category/containers/" rel="tag">Containers</a> | <a href="/category/devops/" rel="tag">Devops</a> | <a href="/category/homelab/" rel="tag">Homelab</a> | <a href="/category/nvidia/" rel="tag">NVIDIA</a> | <a href="/category/traefik/" rel="tag">Traefik</a> | <a href="/category/vmware/" rel="tag">VMware</a></span></div><h1 class="entry-title">Automating the deployment of my Homelab AI Infrastructure</h1><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2026-01-15T21:19:58+00:00" itemprop="datePublished">January 15, 2026</time><time class="updated" datetime="2026-02-08T22:56:47+00:00" itemprop="dateModified">February 8, 2026</time></span><span class="reading-time" style="color: #718096;"><span> ‚Ä¢ </span><span style="margin-right: 4px;">üìñ</span><span>14 min read</span><span style="margin-left: 4px; color: #a0aec0;">(2,827 words)</span></span></div></header><div class="content-freshness-indicator"><span class="freshness-icon">üìÖ</span><span><strong>Published: </strong><time datetime="2026-01-15T21:19:58+00:00">January 15, 2026</time><span class="freshness-separator">‚Ä¢</span><strong>Updated: </strong><time datetime="2026-02-08T22:56:47+00:00">February 08, 2026</time></span></div><div class="entry-content single-content"><p>In a previous <a data-id="5912" data-type="post" href="/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/">post</a>, I wrote about using my VMware lab with an NVIDIA Tesla P4 for running some AI services. This deployment was done with the GPU in walkthrough mode (I will refer to this as GPU). I wanted to take this to the next level. I also wanted to automate most of the steps. This was for a few reasons, firstly I wanted to get better at automating in general. Secondly, I found the setup brittle and wanted to improve the reliability of deployments. This post will be about using automation to deploying of the VM infrastructure required to be able to run AI Workloads.</p><p>I also decided to bite the bullet and update the graphics card I was using to something a bit more modern and capable. After a bit of searching I decided on an <a href="https://www.nvidia.com/en-gb/data-center/products/a10-gpu/" rel="noopener" target="_blank">NVIDIA A10</a></p><p>This post is about getting the foundational infrastructure ready. The first part will explain the steps and detail the Ansible configuration. The second part of this post goes into a full deployment utilising SemaphoreUI. My next post will go into more details on the Docker containers I am using for actually running the AI services building on these foundations.</p><p>All of the code is referenced in my GitHub IAC <a href="https://github.com/jameskilbynet/iac/tree/main/ansible" rel="noopener" target="_blank">repository</a></p><div class="wp-block-rank-math-toc-block" id="rank-math-toc"><h2>Table of Contents</h2><nav><ul><li><a href="#gpu-vs-v-gpu">GPU vs vGPU</a></li><li><a href="#pre-reqs">Pre req‚Äôs</a></li><li><a href="#h">Host Setup</a><ul><li><a href="#v-gpu-profiles">vGPU Profiles</a></li></ul></li><li><a href="#guest-setup">Guest Setup</a><ul><li><a href="#ansible-details">Ansible Details</a><ul><li><a href="#docker-deployment">1. Docker deployment</a></li><li><a href="#windows">2. Install NVIDIA Guest Drivers</a><ul><li><a href="#nvidia-guest-driver-variables">NVIDIA Guest Driver Variables</a></li></ul></li><li><a href="#install-nvidia-container-toolkit">3.Install NVIDIA Container Toolkit</a></li><li><a href="#install-traefik">4. Install Traefik</a><ul><li><a href="#variable-definitions">Traefik Variable Definitions</a></li></ul></li><li><a href="#ansible-secrets">Ansible Secrets</a></li></ul></li></ul></li><li><a href="#implementation">Semaphore End to End Setup</a><ul><li><a href="#repository">Repository</a></li><li><a href="#key-store">Key Store</a></li><li><a href="#inventory">Inventory</a></li><li><a href="#variable-group">Variable Group</a></li><li><a href="#task-templates">Task Templates</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></div><h2 class="wp-block-heading" id="gpu-vs-v-gpu">GPU vs vGPU</h2><p>For anyone not familiar, it may be worth giving an overview of the differences between GPU and vGPU. What I describe as ‚ÄúGPU‚Äù is where I am passing the entire Graphics PCI device through to a single VM within vSphere. Using this method has some advantages, firstly, it doesn‚Äôt require any special licences or drivers. The entire PCI card gets passed into the VM as is. However, it has some downsides. The two most important ones for me are that it can only be presented to a single VM at a time and that VM cannot be snapshotted while it is turned on. This made backups convoluted. As I was changing configurations a lot this became tedious. I also wanted to be able to pass the card through to multiple VM‚Äôs</p><p>vGPU is only officially supported on ‚Äúdatacentre‚Äù cards from NVIDIA it virtualizes the graphics card and allows you to share it across multiple VM‚Äôs in a similar way to what vSphere has done for compute virtualization for years. It allows you to split the card into some predefined profiles that I have listed below and attach them to multiple virtual machines at the same time.</p><h2 class="wp-block-heading" id="pre-reqs">Pre req‚Äôs</h2><p>There are quite a lot of pre-reqs required to be in place to utilise all the attached deployment playbooks. So it‚Äôs worth ensuring that all of these are complete.</p><ul class="wp-block-list"><li>Obviously, you need a vSphere Host and vCentre server licensed at least at the enterprise level (I am using Enterprise Plus on 8.0u3)</li><li>An Ubuntu VM (Tested with 25.04) referred to as the vGPU VM</li><li>A NVIDIA datacenter Graphics card and associated Host and Guest drivers, I am using an A10 24GB and using driver version 535.247.0</li><li>NVIDIA vGPU licence. Trials are available <a href="https://www.nvidia.com/en-gb/data-center/resources/vgpu-evaluation/" rel="noreferrer noopener" target="_blank">here</a> if needed</li><li>NFS Server (used for NVIDIA software deployment)</li><li>A Domain hosted with Cloudflare and an API <a href="http://You can create one at: https://dash.cloudflare.com/profile/api-tokens">token</a> with Zone:DNS:Edit permissions.</li><li>SSH access to the vGPU VM with SUDO permission</li><li>Somewhere to run Ansible playbooks from.</li><li>Internal DNS Records created for
<ul class="wp-block-list"><li>vGPU VM</li><li>Traefik Dashboard</li><li>Test NGINX Server ‚Äì Optional</li><li>NFS Server (Used for vGPU Software install)</li></ul></li></ul><h2 class="wp-block-heading" id="h">Host Setup</h2><p>To make vGPU work successfully, there are three elements required. The first is that the vSphere host has the driver installed. For now, I‚Äôm using the ‚Äò535‚Äô version of the driver, which is the LTS version.` To utilise vGPU with vSphere you need an NVIDIA account to obtain the software. Once this has been obtained, you need to copy the host driver to a VMware datastore. Place the host in maintenance mode and then install the driver.</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>esxcli software vib install -d /vmfs/volumes/02cb3d2b-457ccb84/nvidia/NVIDIA-GRID-vSphere-8.0-535.247.02-535.247.01-539.28.zip</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><p>If it worked successfully, you should get a result like the below</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>Installation Result
   Message: Operation finished successfully.
   VIBs Installed: NVD_bootbank_NVD-VMware_ESXi_8.0.0_Driver_535.247.02-1OEM.800.1.0.20613240
   VIBs Removed: 
   VIBs Skipped: 
   Reboot Required: false
   DPU Results: </code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><p>I always choose to restart the host after installing the driver. I have been bitten in the past where it says a reboot isn‚Äôt required but it was.</p><p>Once the host has restarted, ssh into it and validate that the driver is talking to the GPU correctly. This can be done with the nvidia-smi command. This is executed on the ESXi host and will show something similar to the below if it‚Äôs working.</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>+---------------------------------------------------------------------------------------+
| NVIDIA-SMI 535.247.02             Driver Version: 535.247.02   CUDA Version: N/A      |
|-----------------------------------------+----------------------+----------------------+
| GPU  Name                 Persistence-M | Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp   Perf          Pwr:Usage/Cap |         Memory-Usage | GPU-Util  Compute M. |
|                                         |                      |               MIG M. |
|=========================================+======================+======================|
|   0  NVIDIA A10                     On  | 00000000:03:00.0 Off |                    0 |
|  0%   41C    P8              22W / 150W |  11200MiB / 23028MiB |      0%      Default |
|                                         |                      |                  N/A |
+-----------------------------------------+----------------------+----------------------+</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><h3 class="wp-block-heading" id="v-gpu-profiles">vGPU Profiles</h3><p>If everything is working correctly you should now be able to see the vGPU profiles in vCentre. Select the VM you want to present the NVIDIA card to. Edit the settings and select add PCI device.</p><div class="wp-block-image"><figure class="aligncenter size-large is-resized"><img alt="Add Pci Device 1 402X1024" class="wp-image-7812" decoding="async" fetchpriority="high" height="1024" loading="eager" sizes="(max-width: 402px) 100vw, 402px" src="/wp-content/uploads/2026/01/Add-PCI-Device-1-402x1024.png" srcset="/wp-content/uploads/2026/01/Add-PCI-Device-1-402x1024.png 402w, /wp-content/uploads/2026/01/Add-PCI-Device-1-118x300.png 118w, /wp-content/uploads/2026/01/Add-PCI-Device-1.png 535w" style="aspect-ratio:0.3925797003013966;width:171px;height:auto" width="402"/></figure></div><p>You should then be presented with the available profiles from the NVIDIA GPU</p><figure class="wp-block-image size-large"><img alt="Gpu Profiles 1024X397" class="wp-image-7801" decoding="async" height="397" loading="eager" sizes="(max-width: 1024px) 100vw, 1024px" src="/wp-content/uploads/2026/01/GPU-Profiles-1024x397.png" srcset="/wp-content/uploads/2026/01/GPU-Profiles-1024x397.png 1024w, /wp-content/uploads/2026/01/GPU-Profiles-300x116.png 300w, /wp-content/uploads/2026/01/GPU-Profiles-768x298.png 768w, /wp-content/uploads/2026/01/GPU-Profiles-1536x596.png 1536w, /wp-content/uploads/2026/01/GPU-Profiles.png 1650w" width="1024"/></figure><p>As can be seen the NVIDIA A10 supports 18 different profiles. The nvidia_a10 specifies the card and the suffix determines how much ram is allocated to the vGPU instance along with the features that are exposed with it. I typically use either the a10-24q profile to allow use of larger AI models. Although I do step this down to the 12q profile to allow support of multiple vm‚Äôs for testing etc.</p><p>The NVIDIA A10 supports four separate ‚ÄúPersonalities) A, B, Q and C each of these come with different capabilities but also potentially a different licensing requirement.</p><figure class="wp-block-table"><table class="has-fixed-layout"><thead><tr><th>Profile</th><th>Intended Use</th><th>Driver Feature Set</th><th>License Tier</th><th>Expected Workloads</th></tr></thead><tbody><tr><td>A-Series</td><td>App Streaming / RDSH</td><td>Basic Graphics no pro features</td><td>vAPPS</td><td>Many Users / Published Apps</td></tr><tr><td>B-Series</td><td>VDI Desktops</td><td>Standard Desktop Graphics</td><td>vPC</td><td>Knowledge Worker Desktops</td></tr><tr><td>C-Series</td><td>Compute Only</td><td>CUDA Only </td><td>vCompute Server</td><td>AI/ML Data Science</td></tr><tr><td>Q-Series</td><td>Full GFX Workstation</td><td>Full RTX</td><td>RTX vWS</td><td>CAD,3D Rendering </td></tr></tbody></table></figure><p></p><p>The keen eyed amongst you might realise that I am using the wrong profile. I have chosen to use Q based profiles rather than C based ones. This is because the A, B and Q profiles are run from one ESXi driver VIB and the C profile requires a different VIB. Because I occasionally want to run a VDI based workload or media conversion in my lab. I have chosen to use the more graphics focused VIB and utilise the Q profile for my AI based workloads.</p><h2 class="wp-block-heading" id="guest-setup">Guest Setup</h2><p>To make the guest setup easier and more repeatable I have built some Ansible playbooks. These perform a number of activities that make it MUCH easier to get the guest up and running for use with AI workloads and other containers. These have only been tested with Ubuntu but will probably work with other Linux distro‚Äôs without a lot of changes. As a bonus if you want to utilise the Traefik setup I have built this can be used on its own just with the Deploy Docker and Install Traefik playbooks. Once these playbooks have been run you will be in a position to spin up any number of docker containers with GPU access. </p><p>At a high level the four playbooks I have built:</p><ul class="wp-block-list"><li><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/docker/install_docker.yml" rel="noopener" target="_blank">Deploy Docker </a></li><li><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/vGPU/install_nvidia_drivers.yml" rel="noopener" target="_blank">Install NVIDIA Guest drivers</a></li><li><a href="http://ansible/vGPU/install_nvidia_containertoolkit.yml">Install NVIDIA Container Toolkit</a></li><li><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/traefik/traefik_deploy.yml" rel="noopener" target="_blank">Install Traefik </a></li></ul><h3 class="wp-block-heading" id="ansible-details">Ansible Details </h3><p>I have kept these as separate playbooks for now. This hopefully makes it easier to follow and/or troubleshoot if needed. The playbooks are intended to be run in order. </p><p>I am using SemaphoreUI to handle the Ansible deployment but this isn‚Äôt required. If you are familiar enough with Ansible to not use Semaphore than you can easily modify these to suit your execution preferences.</p><h4 class="wp-block-heading" id="docker-deployment">1. Docker deployment</h4><p><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/docker/install_docker.yml" rel="noopener" target="_blank">https://github.com/jameskilbynet/iac/blob/main/ansible/docker/install_docker.yml</a></p><p>I have covered the deployment of Docker already in <a href="/2025/09/managing-my-homelab-with-semaphoreui/" rel="noopener" target="_blank" title="Managing my Homelab with SemaphoreUI">this</a> post. </p><p>No parameters are required to be set for the Docker deployment. Everything is set in the playbook.</p><h4 class="wp-block-heading" id="windows">2. Install NVIDIA Guest Drivers</h4><p><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/vGPU/install_nvidia_drivers.yml" rel="noopener" target="_blank">https://github.com/jameskilbynet/iac/blob/main/ansible/vGPU/install_nvidia_drivers.yml</a></p><p>This playbook configures an NFS client on the Ubuntu server and then copies both the vGPU license file and the driver from my NFS storage before installing them. This I felt was the best way to have a portable Ansible file without checking in my NVIDIA licence and driver files into Git.</p><p>Before you use this playbook a number of parameters need to be set in Semaphore these should be done in the Variable Group section. I created a Variable Group called vGPU for this purpose. </p><h5 class="wp-block-heading" id="nvidia-guest-driver-variables">NVIDIA Guest Driver Variables</h5><figure class="wp-block-table"><table class="has-fixed-layout"><thead><tr><th><strong>Variable</strong></th><th><strong>Default</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>nvidia_vgpu_driver_file</td><td>NVIDIA-Linux-x86_64-535.247.01-grid.run</td><td>Driver filename</td></tr><tr><td>nvidia_vgpu_licence_file</td><td>client_configuration_token_04-08-2025-16-54-19.tok</td><td>Token filename</td></tr><tr><td>nvidia_nfs_server</td><td>nas.jameskilby.cloud</td><td>NFS server hostname</td></tr><tr><td>nvidia_nfs_export_path</td><td>/mnt/pool1/ISO/nvidia</td><td>NFS export path</td></tr><tr><td>nvidia_nfs_mount_point</td><td>/mnt/iso/nvidia</td><td>Local mount point</td></tr></tbody></table></figure><p>To make your life easier you can copy this json to Semaphore and just tweak what is needed.</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>{
  "nvidia_vgpu_driver_file": "NVIDIA-Linux-x86_64-535.247.01-grid.run",
  "nvidia_vgpu_licence_file": "client_configuration_token_04-08-2025-16-54-19.tok",
  "nvidia_nfs_server": "nas.jameskilby.cloud",
  "nvidia_nfs_export_path": "/mnt/pool1/ISO/nvidia",
  "nvidia_nfs_mount_point": "/mnt/iso/nvidia",
}</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><p>If everything runs smoothly the last step on the Ansible playbook will show an export of the licence and vGPU configuration.</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>TASK [Show vGPU license info] **************************************************
9:18:47 PM
ok: [blogtest.jameskilby.cloud] =&gt; 
9:18:47 PM
  msg: |-
9:18:47 PM
    ==============NVSMI LOG==============
9:18:47 PM
  
9:18:47 PM
    Timestamp                                 : Fri Feb  6 21:18:47 2026
9:18:47 PM
    Driver Version                            : 535.247.01
9:18:47 PM
    CUDA Version                              : 12.2
9:18:47 PM
  
9:18:47 PM
    Attached GPUs                             : 1
9:18:47 PM
    GPU 00000000:03:00.0
9:18:47 PM
        Product Name                          : NVIDIA A10-12Q
9:18:47 PM
        Product Brand                         : NVIDIA RTX Virtual Workstation
9:18:47 PM
        Product Architecture                  : Ampere
9:18:47 PM
        Display Mode                          : Enabled
9:18:47 PM
        Display Active                        : Disabled
9:18:47 PM
        Persistence Mode                      : Enabled
9:18:47 PM
        Addressing Mode                       : None
9:18:47 PM
        MIG Mode
9:18:47 PM
            Current                           : Disabled
9:18:47 PM
            Pending                           : Disabled
9:18:47 PM
        Accounting Mode                       : Disabled
9:18:47 PM
        Accounting Mode Buffer Size           : 4000</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><h4 class="wp-block-heading" id="install-nvidia-container-toolkit">3.Install NVIDIA Container Toolkit</h4><p><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/vGPU/install_nvidia_containertoolkit.yml" rel="noopener" target="_blank">https://github.com/jameskilbynet/iac/blob/main/ansible/vGPU/install_nvidia_containertoolkit.yml</a></p><p>This playbook installs the NVIDIA container toolkit and validates that everything is working by running a Docker container and executing the nvidia-smi command from within a container. This sounds trivial but actually is one of the main reasons I made these playbooks. To get the GPU to work in the docker container you have to have a lot of things set up correctly. </p><p>No additional parameters need to be set to execute it. </p><p>The below is the expected output showcasing nvidia-smi running from within a docker container. </p><figure class="wp-block-image size-large"><img alt="Nvidia Smi 1024X654" class="wp-image-7817" decoding="async" height="654" loading="lazy" sizes="auto, (max-width: 1024px) 100vw, 1024px" src="/wp-content/uploads/2026/01/nvidia-smi-1024x654.png" srcset="/wp-content/uploads/2026/01/nvidia-smi-1024x654.png 1024w, /wp-content/uploads/2026/01/nvidia-smi-300x192.png 300w, /wp-content/uploads/2026/01/nvidia-smi-768x490.png 768w, /wp-content/uploads/2026/01/nvidia-smi-1536x981.png 1536w, /wp-content/uploads/2026/01/nvidia-smi.png 1610w" width="1024"/></figure><h4 class="wp-block-heading" id="install-traefik">4. Install Traefik</h4><p><a href="https://github.com/jameskilbynet/iac/blob/main/ansible/traefik/traefik_deploy.yml" rel="noopener" target="_blank">https://github.com/jameskilbynet/iac/blob/main/ansible/traefik/traefik_deploy.yml</a></p><p>For those unfamiliar with Traefik ( It‚Äôs pronounced Traffic) it is a reverse proxy/ingress controller with automatic integrations to Docker and Kubernetes. I have it configured so that it can leverage both Let‚Äôs Encrypt and Cloudflare so that it will automatically obtain signed certificates for me. This is done with Docker labels in such a way that any container I spin up that has the correct Traefik labels will automatically mint a signed certificate and add it to the load balancer. This has the added benefit that I just need to remember a URL IE openwebui.jameskilby.cloud rather than which VM and port the service is running on. It has the added benefit that it makes it very easy for me to expose services externally if needed. I just add the appropriate DNS record on my external DNS.</p><p>The labels look something like the below. These are added to the individual Docker containers and Traefik can see them through the Docker API. When the containers are started it will autoconfigure the certificate generation and automatically configure the load balancer. If the container is removed or stopped it will tidy up the configuration.</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>  labels:
      - "traefik.enable=true"
      - "traefik.http.routers.open-webui.rule=Host(`openwebui.jameskilby.cloud`)"
      - "traefik.http.routers.open-webui.entrypoints=websecure"
      - "traefik.http.routers.open-webui.tls=true"
      - "traefik.http.routers.open-webui.tls.certresolver=cloudflare"
      - "traefik.http.services.open-webui.loadbalancer.server.port=8080"</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><p>With the above labels added to my OpenWebUI container, Traefik will request a certificate for openwebui.jameskilby.cloud and deploy this as a HTTPS service mapped to the OpenWebUI container on port 8080</p><p>I could probably do a whole post just on my setup of Traefik but for now here is an overview diagram.</p><figure class="wp-block-image size-large"><picture><source srcset="/wp-content/uploads/2025/01/Traefik-Docker-Setup-2-1024x342.avif" type="image/avif"/><source srcset="/wp-content/uploads/2025/01/Traefik-Docker-Setup-2-1024x342.webp" type="image/webp"/><img alt="Traefik Docker Setup 2 1024X342" class="wp-image-6349" decoding="async" height="342" loading="lazy" sizes="auto, (max-width: 1024px) 100vw, 1024px" src="/wp-content/uploads/2025/01/Traefik-Docker-Setup-2-1024x342.png" srcset="/wp-content/uploads/2025/01/Traefik-Docker-Setup-2-1024x342.png 1024w, /wp-content/uploads/2025/01/Traefik-Docker-Setup-2-300x100.png 300w, /wp-content/uploads/2025/01/Traefik-Docker-Setup-2-768x256.png 768w, /wp-content/uploads/2025/01/Traefik-Docker-Setup-2-1536x513.png 1536w, /wp-content/uploads/2025/01/Traefik-Docker-Setup-2-2048x684.png 2048w" width="1024"/></picture></figure><p>As part of the included playbook I have added the option to deploy a simple nginx web server using this principle. If everything is configured correctly you should be able to connect to this container post deployment and it will have a fully trusted certificate as seen below. (you may need to wait 30 seconds or so after deployment for this process to complete)</p><figure class="wp-block-image size-large is-style-default"><img alt="Nginx Cert 1024X997" class="wp-image-7756" decoding="async" height="997" loading="lazy" src="/wp-content/uploads/2026/01/nginx-cert-1024x997.png" style="aspect-ratio:1.0270840661273304" width="1024"/></figure><p>Before running this playbook a lot of variables need to be configured as can be seen below. In most cases the default is OK. I have just extended the vGPU Variable group to do this. When they are all input to Semaphore it will look something like this.</p><figure class="wp-block-image size-large"><img alt="Traefik Variables 804X1024" class="wp-image-7763" decoding="async" height="1024" loading="lazy" sizes="auto, (max-width: 804px) 100vw, 804px" src="/wp-content/uploads/2026/01/Traefik-Variables-804x1024.png" srcset="/wp-content/uploads/2026/01/Traefik-Variables-804x1024.png 804w, /wp-content/uploads/2026/01/Traefik-Variables-236x300.png 236w, /wp-content/uploads/2026/01/Traefik-Variables-768x978.png 768w, /wp-content/uploads/2026/01/Traefik-Variables-1206x1536.png 1206w, /wp-content/uploads/2026/01/Traefik-Variables.png 1388w" width="804"/></figure><p>Rather than typing all of the values out you can copy the JSON below and then just tweak what you need to.</p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>{
  "nvidia_vgpu_driver_file": "NVIDIA-Linux-x86_64-535.247.01-grid.run",
  "nvidia_vgpu_licence_file": "client_configuration_token_04-08-2025-16-54-19.tok",
  "nvidia_nfs_server": "nas.jameskilby.cloud",
  "nvidia_nfs_export_path": "/mnt/pool1/ISO/nvidia",
  "nvidia_nfs_mount_point": "/mnt/iso/nvidia",
  "traefik_deploy_test_service": "true",
  "traefik_healthcheck_poll_retries": "12",
  "traefik_healthcheck_poll_delay": "5",
  "traefik_docker_image": "traefik:v3.6.4",
  "traefik_name": "traefik",
  "traefik_config_path": "/etc/traefik",
  "traefik_acme_path": "/etc/traefik/acme",
  "traefik_docker_network": "traefik",
  "traefik_http_port": "80",
  "traefik_https_port": "443",
  "acme_dns_delay": "10",
  "acme_dns_resolvers": "[\"1.1.1.1:53\", \"8.8.8.8:53\"]",
  "traefik_log_level": "info",
  "traefik_log_format": "json",
  "traefik_log_max_size": "10m",
  "traefik_log_max_files": "3",
  "traefik_healthcheck_interval": "30s",
  "traefik_healthcheck_timeout": "10s",
  "traefik_healthcheck_retries": "3",
  "traefik_healthcheck_start_period": "30s",
  "traefik_test_container": "nginx-test",
  "traefik_test_image": "nginx:alpine",
  "traefik_test_domain": "test.jameskilby.cloud",
  "traefik_dashboard_user": "admin",
  "wildcard_domain": "jameskilby.cloud"
}</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><h5 class="wp-block-heading" id="variable-definitions">Traefik Variable Definitions</h5><figure class="wp-block-table"><table class="has-fixed-layout"><thead><tr><th><strong>Variable</strong></th><th><strong>Default</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>traefik_deploy_test_service</td><td>true</td><td>set to false to skip NGINX deployment</td></tr><tr><td>traefik_healthcheck_poll_retries</td><td>12</td><td>Number of health check poll attempts</td></tr><tr><td>traefik_docker_image</td><td>3.6</td><td>Traefik Docker Image and version</td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table></figure><p></p><p></p><figure class="wp-block-table"><table class="has-fixed-layout"><thead><tr><th class="has-text-align-left" data-align="left"> Variable</th><th class="has-text-align-left" data-align="left">Default</th><th class="has-text-align-left" data-align="left">Description</th></tr></thead><tbody><tr><td class="has-text-align-left" data-align="left"><code>traefik_deploy_test_service</code></td><td class="has-text-align-left" data-align="left"><code style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); white-space: normal;"><code>true</code></code></td><td class="has-text-align-left" data-align="left">Set to¬†<code>false</code>¬†to skip test nginx deployment</td></tr><tr><td class="has-text-align-left" data-align="left"><code>traefik_healthcheck_poll_retries</code></td><td class="has-text-align-left" data-align="left"><code>12</code></td><td class="has-text-align-left" data-align="left">Number of health check poll attempts</td></tr><tr><td class="has-text-align-left" data-align="left"><code style="caret-color: rgb(0, 0, 0); color: rgb(0, 0, 0); white-space: normal;">traefik_healthcheck_poll_delay</code></td><td class="has-text-align-left" data-align="left"><code>5</code></td><td class="has-text-align-left" data-align="left">Seconds between health check polls</td></tr><tr><td><code>traefik_docker_image</code></td><td><code>traefik:v3</code></td><td>Traefik Docker image</td></tr><tr><td><code>traefik_name</code></td><td><code>traefik</code></td><td>Container name</td></tr><tr><td><code>traefik_config_path</code></td><td><code>/etc/traefik</code></td><td>Config directory</td></tr><tr><td><code>traefik_acme_path</code></td><td><code>/etc/traefik/acme</code></td><td>ACME/cert directory</td></tr><tr><td><code>traefik_docker_network</code></td><td><code>traefik</code></td><td>Docker network name</td></tr><tr><td><code>traefik_http_port</code></td><td><code>80</code></td><td>HTTP port</td></tr><tr><td><code>traefik_https_port</code></td><td><code>443</code></td><td>HTTPS port</td></tr><tr><td><code>acme_dns_delay</code></td><td><code>10</code></td><td>Seconds before DNS check</td></tr><tr><td><code>acme_dns_resolvers</code></td><td><code>['1.1.1.1:53', '8.8.8.8:53']</code></td><td>DNS resolvers</td></tr><tr><td><code>traefik_log_level</code></td><td><code>INFO</code></td><td>Log level</td></tr><tr><td><code>traefik_log_format</code></td><td><code>json</code></td><td>Log format</td></tr><tr><td><code>traefik_log_max_size</code></td><td><code>10m</code></td><td>Max log size</td></tr><tr><td><code>traefik_log_max_files</code></td><td><code>3</code></td><td>Max log files</td></tr><tr><td><code>traefik_healthcheck_interval</code></td><td><code>30s</code></td><td>Health check interval</td></tr><tr><td><code>traefik_healthcheck_timeout</code></td><td><code>10s</code></td><td>Health check timeout</td></tr><tr><td><code>traefik_healthcheck_retries</code></td><td><code>3</code></td><td>Health check retries</td></tr><tr><td><code>traefik_healthcheck_start_period</code></td><td><code>30s</code></td><td>Health check grace period</td></tr><tr><td><code>traefik_test_container</code></td><td><code>nginx-test</code></td><td>Test container name</td></tr><tr><td><code>traefik_test_image</code></td><td><code>nginx:alpine</code></td><td>Test container image</td></tr><tr><td><code>traefik_test_domain</code></td><td><code>test.&lt;wildcard_domain&gt;</code></td><td>Test service domain</td></tr><tr><td><code>traefik_dashboard_user</code></td><td><code>admin</code></td><td>Dashboard username</td></tr><tr><td class="has-text-align-left" data-align="left">traefik_dashboard_domain</td><td class="has-text-align-left" data-align="left">trdash.jameskilby.cloud</td><td class="has-text-align-left" data-align="left">tr</td></tr></tbody></table></figure><h4 class="wp-block-heading" id="ansible-secrets">Ansible Secrets</h4><p>The playbook also needs two values that should be considered sensitive. These can be added to Semaphore as secrets. The two secrets are the Cloudflare API Token and the second is a hash of a password that is used to access the Traefik dashboard. The Traefik dashboard is very useful for troubleshooting any SSL/connectivity issues.</p><figure class="wp-block-image size-large"><img alt="Semaphoresecrets 1024X262" class="wp-image-7725" decoding="async" height="262" loading="lazy" sizes="auto, (max-width: 1024px) 100vw, 1024px" src="/wp-content/uploads/2026/01/SemaphoreSecrets-1024x262.png" srcset="/wp-content/uploads/2026/01/SemaphoreSecrets-1024x262.png 1024w, /wp-content/uploads/2026/01/SemaphoreSecrets-300x77.png 300w, /wp-content/uploads/2026/01/SemaphoreSecrets-768x197.png 768w, /wp-content/uploads/2026/01/SemaphoreSecrets.png 1350w" width="1024"/></figure><p>The Cloudflare Token needs to be generated in the Cloudflare dashboard. </p><p>To generate the hash for the admin dashboard password, the easiest way is with Docker. The below is an example that can be run on the command line </p><div class="code-block-wrapper" style="position: relative; margin: 1em 0;"><pre class="wp-block-code"><code>docker run --rm httpd:2   htpasswd -nbB '' 'your_password_here'</code></pre><button aria-label="Copy code to clipboard" class="copy-code-button" style="position: absolute; top: 8px; right: 8px; padding: 6px 12px; background: #2d3748; color: #fff; border: 1px solid #4a5568; border-radius: 4px; cursor: pointer; font-size: 12px; font-family: sans-serif; opacity: 0.8; transition: opacity 0.2s, background 0.2s; z-index: 10;">üìã Copy</button></div><p>It will download and execute the httpd container the last line is the hash that you need.</p><figure class="wp-block-image size-large"><img alt="Httpd 1024X383" class="wp-image-7777" decoding="async" height="383" loading="lazy" sizes="auto, (max-width: 1024px) 100vw, 1024px" src="/wp-content/uploads/2026/01/httpd-1024x383.png" srcset="/wp-content/uploads/2026/01/httpd-1024x383.png 1024w, /wp-content/uploads/2026/01/httpd-300x112.png 300w, /wp-content/uploads/2026/01/httpd-768x288.png 768w, /wp-content/uploads/2026/01/httpd.png 1266w" width="1024"/></figure><p>In this case the hash is :$2y$05$nkQGI2UxnRY.7O.6k14naOJPjslbqOT5vpqZPmXMu4knhBOH1EUAqtake the output from this output and add it to the Semaphore secure variable for ‚Äúdashboard_admin_password_hash‚Äù</p><h2 class="wp-block-heading" id="implementation">Semaphore End to End Setup</h2><p>Assuming you are going to use SemaphoreUI to execute the playbooks these are the steps you will need to take. If you haven‚Äôt already set it up review my guide <a data-id="6800" data-type="post" href="/2025/09/managing-my-homelab-with-semaphoreui/">here</a></p><h3 class="wp-block-heading" id="repository">Repository</h3><p>The first step is to point Semaphore at the Git repository. This is the location where the playbooks will be executed from. As my Git repo is public no authentication is required. You also need to specify the branch, in this case I am using main. </p><figure class="wp-block-image size-full"><img alt="Semaphore Repo" class="wp-image-7784" decoding="async" height="820" loading="lazy" sizes="auto, (max-width: 894px) 100vw, 894px" src="/wp-content/uploads/2026/01/Semaphore_repo.png" srcset="/wp-content/uploads/2026/01/Semaphore_repo.png 894w, /wp-content/uploads/2026/01/Semaphore_repo-300x275.png 300w, /wp-content/uploads/2026/01/Semaphore_repo-768x704.png 768w" width="894"/></figure><h3 class="wp-block-heading" id="key-store">Key Store</h3><p>The next step is to add the Key Store items. This is used to define the authentication from Semaphore to the target workload or other systems.I do this in two parts. The first is standard authentication which I do with an SSH key. The second part is defining the become password to allow Semaphore to execute SUDO commands. I do this with a password stored in the Key Store. I have called these two methods KeyAuth and PassAuth</p><figure class="wp-block-image size-large"><img alt="Newkey 802X1024" class="wp-image-7785" decoding="async" height="1024" loading="lazy" sizes="auto, (max-width: 802px) 100vw, 802px" src="/wp-content/uploads/2026/01/NewKey-802x1024.png" srcset="/wp-content/uploads/2026/01/NewKey-802x1024.png 802w, /wp-content/uploads/2026/01/NewKey-235x300.png 235w, /wp-content/uploads/2026/01/NewKey-768x980.png 768w, /wp-content/uploads/2026/01/NewKey.png 898w" width="802"/></figure><p>Once the Key authentication is added, the next step is to add a different key store item for when the playbook needs to ‚ÄúBecome‚Äù</p><figure class="wp-block-image size-full"><img alt="Passauth" class="wp-image-7788" decoding="async" height="908" loading="lazy" sizes="auto, (max-width: 896px) 100vw, 896px" src="/wp-content/uploads/2026/01/PassAuth.png" srcset="/wp-content/uploads/2026/01/PassAuth.png 896w, /wp-content/uploads/2026/01/PassAuth-296x300.png 296w, /wp-content/uploads/2026/01/PassAuth-768x778.png 768w" width="896"/></figure><p>An Alternative approach is to allow your user to elevate without confirmation.</p><h3 class="wp-block-heading" id="inventory">Inventory</h3><p>Once the authentication methods are now defined the next step is to update the Semaphore Inventory. </p><p>I have created a new Inventory item called ‚ÄúvGPU‚Äô set the User credentials to be KeyAuth and the Sudo credentials as PassAuth.</p><p>I‚Äôve then added the specific VM in the inventory. For testing I have called this blogtest.</p><figure class="wp-block-image size-large"><img alt="Blogtest Ansible Inventory 670X1024" class="wp-image-7790" decoding="async" height="1024" loading="lazy" sizes="auto, (max-width: 670px) 100vw, 670px" src="/wp-content/uploads/2026/01/blogtest_ansible_inventory-670x1024.png" srcset="/wp-content/uploads/2026/01/blogtest_ansible_inventory-670x1024.png 670w, /wp-content/uploads/2026/01/blogtest_ansible_inventory-196x300.png 196w, /wp-content/uploads/2026/01/blogtest_ansible_inventory-768x1174.png 768w, /wp-content/uploads/2026/01/blogtest_ansible_inventory.png 896w" width="670"/></figure><h3 class="wp-block-heading" id="variable-group">Variable Group</h3><p>The next step is to create a variable group and the required variables. </p><p>Review the variable table above and set to match your environment. This is what mine looks like</p><h3 class="wp-block-heading" id="task-templates">Task Templates</h3><p>Then ensure that the task template is set to use it</p><figure class="wp-block-image size-large"><img alt="Variable Group 1024X547" class="wp-image-7701" decoding="async" height="547" loading="lazy" sizes="auto, (max-width: 1024px) 100vw, 1024px" src="/wp-content/uploads/2026/01/Variable-Group-1024x547.png" srcset="/wp-content/uploads/2026/01/Variable-Group-1024x547.png 1024w, /wp-content/uploads/2026/01/Variable-Group-300x160.png 300w, /wp-content/uploads/2026/01/Variable-Group-768x410.png 768w, /wp-content/uploads/2026/01/Variable-Group-1536x821.png 1536w, /wp-content/uploads/2026/01/Variable-Group-2048x1094.png 2048w" width="1024"/></figure><p></p><p></p><p>Traefik Dashboard¬±1a23s45tyui</p><p></p><p></p><h2 class="wp-block-heading" id="conclusion">Conclusion </h2></div><section class="related-posts" style="margin: 40px 0; padding: 30px; background: #f7fafc; border-radius: 8px; border-left: 4px solid #4299e1;"><h2 style="margin: 0 0 20px 0; font-size: 24px; color: #2d3748;">üìö Related Posts</h2><ul style="list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;"><li style="background: white; padding: 16px; border-radius: 6px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); transition: box-shadow 0.2s;"><a href="/2025/09/managing-my-homelab-with-semaphoreui/" style="color: #2d3748; text-decoration: none; display: block; font-weight: 500; hover: color: #4299e1;">Managing my Homelab with SemaphoreUI</a></li></ul></section><div class="comments-area" id="comments"><div class="pb-30"><section id="utterances-comments"><script async="" crossorigin="anonymous" data-cfasync="false" data-issue-term="pathname" data-repo="jameskilbynet/jkcoukblog" data-theme="github-dark" src="https://utteranc.es/client.js"></script></section></div></div><footer class="entry-footer"><div class="entry-tags"><span class="tags-links"><span class="tags-label screen-reader-text"> Post Tags: </span><a class="tag-link tag-item-ai" href="/tag/ai/" rel="tag" title="AI"><span class="tag-hash">#</span>AI</a><a class="tag-link tag-item-docker" href="/tag/docker/" rel="tag" title="Docker"><span class="tag-hash">#</span>Docker</a><a class="tag-link tag-item-homelab" href="/tag/homelab/" rel="tag" title="Homelab"><span class="tag-hash">#</span>Homelab</a><a class="tag-link tag-item-nvidia" href="/tag/nvidia/" rel="tag" title="Nvidia"><span class="tag-hash">#</span>Nvidia</a><a class="tag-link tag-item-semaphore" href="/tag/semaphore/" rel="tag" title="Semaphore"><span class="tag-hash">#</span>Semaphore</a></span></div></footer></div></article><nav aria-label="Posts" class="navigation post-navigation"><h2 class="screen-reader-text">Post navigation</h2><div class="nav-links"><div class="nav-previous"><a href="/2026/01/web-development-improvements/" rel="prev"><div class="post-navigation-sub"><small><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-left-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 29 28" width="29" xmlns="http://www.w3.org/2000/svg"><title>Previous</title><path d="M28 12.5v3c0 0.281-0.219 0.5-0.5 0.5h-19.5v3.5c0 0.203-0.109 0.375-0.297 0.453s-0.391 0.047-0.547-0.078l-6-5.469c-0.094-0.094-0.156-0.219-0.156-0.359v0c0-0.141 0.063-0.281 0.156-0.375l6-5.531c0.156-0.141 0.359-0.172 0.547-0.094 0.172 0.078 0.297 0.25 0.297 0.453v3.5h19.5c0.281 0 0.5 0.219 0.5 0.5z"></path></svg></span>Previous</small></div>Web Development Improvements</a></div><div class="nav-next"><a href="/2026/01/using-content-libraries-in-vmc-to-deploy-software-faster/" rel="next"><div class="post-navigation-sub"><small>Next<span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></small></div>Using Content Libraries in VMC to deploy software faster</a></div></div></nav><div class="entry-related alignfull entry-related-style-wide"><div class="entry-related-inner content-container site-container"><div class="entry-related-inner-content alignwide"><h2 class="entry-related-title" id="related-posts-title">Similar Posts</h2><div aria-labelledby="related-posts-title" class="entry-related-carousel kadence-slide-init splide" data-columns-md="3" data-columns-sm="2" data-columns-ss="1" data-columns-xl="3" data-columns-xs="2" data-columns-xxl="3" data-slider-anim-speed="400" data-slider-arrows="true" data-slider-auto="false" data-slider-dots="true" data-slider-gutter="40" data-slider-hover-pause="false" data-slider-loop="true" data-slider-next-label="Next" data-slider-prev-label="Previous" data-slider-scroll="1" data-slider-slide-label="Posts" data-slider-speed="7000"><div class="splide__track"><ul class="splide__list kadence-posts-list grid-cols grid-sm-col-2 grid-lg-col-3"><li class="entry-list-item carousel-item splide__slide"><article class="entry content-bg loop-entry post-5912 post type-post status-publish format-standard has-post-thumbnail hentry category-artificial-intelligence category-docker category-homelab tag-artificial-intelligence tag-homelab tag-nvidia"><a aria-hidden="true" aria-label="Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU" class="post-thumbnail kadence-thumbnail-ratio-2-3" href="/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/" role="presentation" tabindex="-1"><div class="post-thumbnail-inner"><picture><source srcset="/wp-content/uploads/2024/10/pexels-tara-winstead-8386440-768x512.avif" type="image/avif"/><source srcset="/wp-content/uploads/2024/10/pexels-tara-winstead-8386440-768x512.webp" type="image/webp"/><img alt="Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU" class="attachment-medium_large size-medium_large wp-post-image" decoding="async" height="512" loading="lazy" sizes="(max-width: 480px) 95vw, (max-width: 768px) 90vw, 400px" src="/wp-content/uploads/2024/10/pexels-tara-winstead-8386440-768x512.jpg" srcset="/wp-content/uploads/2024/10/pexels-tara-winstead-8386440-768x512.jpg 768w, /wp-content/uploads/2024/10/pexels-tara-winstead-8386440-300x200.jpg 300w, /wp-content/uploads/2024/10/pexels-tara-winstead-8386440-1024x683.jpg 1024w, /wp-content/uploads/2024/10/pexels-tara-winstead-8386440-1536x1024.jpg 1536w, /wp-content/uploads/2024/10/pexels-tara-winstead-8386440-2048x1365.jpg 2048w" width="768"/></picture></div></a><div class="entry-content-wrap"><header class="entry-header"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a class="category-link-artificial-intelligence" href="/category/artificial-intelligence/" rel="tag">Artificial Intelligence</a> | <a class="category-link-docker" href="/category/docker/" rel="tag">Docker</a> | <a class="category-link-homelab" href="/category/homelab/" rel="tag">Homelab</a></span></div><h3 class="entry-title"><a href="/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/" rel="bookmark">Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU</a></h3><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2024-10-11T15:03:26+00:00" itemprop="datePublished">October 11, 2024</time><time class="updated" datetime="2025-10-01T15:22:12+00:00" itemprop="dateModified">October 1, 2025</time></span></div></header><div class="entry-summary"><p>Artificial intelligence is all the rage at the moment, It‚Äôs getting included in every product announcement from pretty much every vendor under the sun. Nvidia‚Äôs stock price has gone to the moon. So I thought I better get some knowledge and understand some of this. As it‚Äôs a huge field and I wasn‚Äôt exactly sure‚Ä¶</p></div><footer class="entry-footer"><div class="entry-actions"><p class="more-link-wrap"><a class="post-more-link" href="/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/"> Read More<span class="screen-reader-text"> Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU</span><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></a></p></div></footer></div></article></li><li class="entry-list-item carousel-item splide__slide"><article class="entry content-bg loop-entry post-3241 post type-post status-publish format-standard has-post-thumbnail hentry category-devops category-personal tag-git tag-github tag-packer"><a aria-hidden="true" aria-label="My First Pull" class="post-thumbnail kadence-thumbnail-ratio-2-3" href="/2020/12/my-first-pull/" role="presentation" tabindex="-1"><div class="post-thumbnail-inner"><picture><source srcset="/wp-content/uploads/2020/12/175jvBleoQfAZJc3sgTSPQA.avif" type="image/avif"/><source srcset="/wp-content/uploads/2020/12/175jvBleoQfAZJc3sgTSPQA.webp" type="image/webp"/><img alt="My First Pull" class="attachment-medium_large size-medium_large wp-post-image" decoding="async" height="360" loading="lazy" sizes="(max-width: 480px) 95vw, (max-width: 768px) 90vw, 400px" src="/wp-content/uploads/2020/12/175jvBleoQfAZJc3sgTSPQA.jpg" srcset="/wp-content/uploads/2020/12/175jvBleoQfAZJc3sgTSPQA.jpg 640w, /wp-content/uploads/2020/12/175jvBleoQfAZJc3sgTSPQA-300x169.jpg 300w" width="640"/></picture></div></a><div class="entry-content-wrap"><header class="entry-header"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a class="category-link-devops" href="/category/devops/" rel="tag">Devops</a> | <a class="category-link-personal" href="/category/personal/" rel="tag">Personal</a></span></div><h3 class="entry-title"><a href="/2020/12/my-first-pull/" rel="bookmark">My First Pull</a></h3><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2020-12-22T16:38:11+00:00" itemprop="datePublished">December 22, 2020</time><time class="updated" datetime="2025-12-08T12:48:16+00:00" itemprop="dateModified">December 8, 2025</time></span></div></header><div class="entry-summary"><p>I was initially going to add in the contents of this post to one that I have been writing about my exploits with HashiCorp Packer but I decided it probably warranted being separated out. While working with the following awesome project I noticed a couple of minor errors and Improvements that I wanted to suggest‚Ä¶.</p></div><footer class="entry-footer"><div class="entry-actions"><p class="more-link-wrap"><a class="post-more-link" href="/2020/12/my-first-pull/"> Read More<span class="screen-reader-text"> My First Pull</span><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></a></p></div></footer></div></article></li><li class="entry-list-item carousel-item splide__slide"><article class="entry content-bg loop-entry post-6695 post type-post status-publish format-standard has-post-thumbnail hentry category-mikrotik category-networking tag-homelab tag-mikrotik tag-networking"><a aria-hidden="true" aria-label="Home Network Upgrade" class="post-thumbnail kadence-thumbnail-ratio-2-3" href="/2024/09/home-network-upgrade/" role="presentation" tabindex="-1"><div class="post-thumbnail-inner"><picture><source srcset="/wp-content/uploads/2024/09/s-l1600-768x427.avif" type="image/avif"/><source srcset="/wp-content/uploads/2024/09/s-l1600-768x427.webp" type="image/webp"/><img alt="CRS-504" class="attachment-medium_large size-medium_large wp-post-image" decoding="async" height="427" loading="lazy" sizes="(max-width: 480px) 95vw, (max-width: 768px) 90vw, 400px" src="/wp-content/uploads/2024/09/s-l1600-768x427.jpg" srcset="/wp-content/uploads/2024/09/s-l1600-768x427.jpg 768w, /wp-content/uploads/2024/09/s-l1600-300x167.jpg 300w, /wp-content/uploads/2024/09/s-l1600-1024x569.jpg 1024w, /wp-content/uploads/2024/09/s-l1600.jpg 1280w" width="768"/></picture></div></a><div class="entry-content-wrap"><header class="entry-header"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a class="category-link-mikrotik" href="/category/mikrotik/" rel="tag">Mikrotik</a> | <a class="category-link-networking" href="/category/networking/" rel="tag">Networking</a></span></div><h3 class="entry-title"><a href="/2024/09/home-network-upgrade/" rel="bookmark">Home Network Upgrade</a></h3><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2024-09-09T08:25:08+00:00" itemprop="datePublished">September 9, 2024</time><time class="updated" datetime="2025-10-24T14:21:56+00:00" itemprop="dateModified">October 24, 2025</time></span></div></header><div class="entry-summary"><p>My journey to superfast networking in my homelab</p></div><footer class="entry-footer"><div class="entry-actions"><p class="more-link-wrap"><a class="post-more-link" href="/2024/09/home-network-upgrade/"> Read More<span class="screen-reader-text"> Home Network Upgrade</span><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></a></p></div></footer></div></article></li><li class="entry-list-item carousel-item splide__slide"><article class="entry content-bg loop-entry post-6560 post type-post status-publish format-standard has-post-thumbnail hentry category-docker category-portainer category-synology tag-homelab tag-portainer tag-synology"><a aria-hidden="true" aria-label="How to Fix Portainer Agent not Starting On Synology DSM" class="post-thumbnail kadence-thumbnail-ratio-2-3" href="/2025/03/portainer-agent-on-synology-dsm/" role="presentation" tabindex="-1"><div class="post-thumbnail-inner"><picture><source srcset="/wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-768x528.avif" type="image/avif"/><source srcset="/wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-768x528.webp" type="image/webp"/><img alt="How to Fix Portainer Agent not Starting On Synology DSM" class="attachment-medium_large size-medium_large wp-post-image" decoding="async" height="528" loading="lazy" sizes="(max-width: 480px) 95vw, (max-width: 768px) 90vw, 400px" src="/wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-768x528.png" srcset="/wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-768x528.png 768w, /wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-300x206.png 300w, /wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-1024x705.png 1024w, /wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-1536x1057.png 1536w, /wp-content/uploads/2025/03/Docker-Symbol-1-2199360526-2048x1409.png 2048w" width="768"/></picture></div></a><div class="entry-content-wrap"><header class="entry-header"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a class="category-link-docker" href="/category/docker/" rel="tag">Docker</a> | <a class="category-link-portainer" href="/category/portainer/" rel="tag">Portainer</a> | <a class="category-link-synology" href="/category/synology/" rel="tag">Synology</a></span></div><h3 class="entry-title"><a href="/2025/03/portainer-agent-on-synology-dsm/" rel="bookmark">How to Fix Portainer Agent not Starting On Synology DSM</a></h3><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2025-03-11T12:06:39+00:00" itemprop="datePublished">March 11, 2025</time><time class="updated" datetime="2025-12-27T14:26:37+00:00" itemprop="dateModified">December 27, 2025</time></span></div></header><div class="entry-summary"><p>How to fix Portainer Agent no starting on Synology</p></div><footer class="entry-footer"><div class="entry-actions"><p class="more-link-wrap"><a class="post-more-link" href="/2025/03/portainer-agent-on-synology-dsm/"> Read More<span class="screen-reader-text"> How to Fix Portainer Agent not Starting On Synology DSM</span><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></a></p></div></footer></div></article></li><li class="entry-list-item carousel-item splide__slide"><article class="entry content-bg loop-entry post-7275 post type-post status-publish format-standard has-post-thumbnail hentry category-vmware-cloud-on-aws tag-ntp tag-vmware-cloud-on-aws"><a aria-hidden="true" aria-label="Time in a VMC Environment" class="post-thumbnail kadence-thumbnail-ratio-2-3" href="/2025/12/time-in-a-vmc-environment/" role="presentation" tabindex="-1"><div class="post-thumbnail-inner"><picture><source srcset="/wp-content/uploads/2025/02/Picture-1-e1768509620339-768x193.avif" type="image/avif"/><source srcset="/wp-content/uploads/2025/02/Picture-1-e1768509620339-768x193.webp" type="image/webp"/><img alt="Time in a VMC Environment" class="attachment-medium_large size-medium_large wp-post-image" decoding="async" height="193" loading="lazy" sizes="(max-width: 480px) 95vw, (max-width: 768px) 90vw, 400px" src="/wp-content/uploads/2025/02/Picture-1-e1768509620339-768x193.png" srcset="/wp-content/uploads/2025/02/Picture-1-e1768509620339-768x193.png 768w, /wp-content/uploads/2025/02/Picture-1-e1768509620339-300x75.png 300w, /wp-content/uploads/2025/02/Picture-1-e1768509620339.png 816w" width="768"/></picture></div></a><div class="entry-content-wrap"><header class="entry-header"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a class="category-link-vmware-cloud-on-aws" href="/category/vmware/vmware-cloud-on-aws/" rel="tag">VMware Cloud on AWS</a></span></div><h3 class="entry-title"><a href="/2025/12/time-in-a-vmc-environment/" rel="bookmark">Time in a VMC Environment</a></h3><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2025-12-08T14:03:44+00:00" itemprop="datePublished">December 8, 2025</time><time class="updated" datetime="2026-02-01T10:38:13+00:00" itemprop="dateModified">February 1, 2026</time></span></div></header><div class="entry-summary"><p>How to use the Amazon Time Sync Service in a VMC environment</p></div><footer class="entry-footer"><div class="entry-actions"><p class="more-link-wrap"><a class="post-more-link" href="/2025/12/time-in-a-vmc-environment/"> Read More<span class="screen-reader-text"> Time in a VMC Environment</span><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></a></p></div></footer></div></article></li><li class="entry-list-item carousel-item splide__slide"><article class="entry content-bg loop-entry post-5039 post type-post status-publish format-standard has-post-thumbnail hentry category-vmware category-personal category-vsphere tag-certification tag-vcap tag-vmware"><a aria-hidden="true" aria-label="Advanced Deploy VMware vSphere 7.x 3V0-22.21N" class="post-thumbnail kadence-thumbnail-ratio-2-3" href="/2023/11/advanced-deploy-vmware-vsphere-7-x-3v0-22-21n/" role="presentation" tabindex="-1"><div class="post-thumbnail-inner"><picture><source srcset="/wp-content/uploads/2023/11/image.avif" type="image/avif"/><source srcset="/wp-content/uploads/2023/11/image.webp" type="image/webp"/><img alt="Advanced Deploy VMware vSphere 7.x 3V0-22.21N" class="attachment-medium_large size-medium_large wp-post-image" decoding="async" height="340" loading="lazy" sizes="(max-width: 480px) 95vw, (max-width: 768px) 90vw, 400px" src="/wp-content/uploads/2023/11/image.png" srcset="/wp-content/uploads/2023/11/image.png 340w, /wp-content/uploads/2023/11/image-300x300.png 300w, /wp-content/uploads/2023/11/image-150x150.png 150w" width="340"/></picture></div></a><div class="entry-content-wrap"><header class="entry-header"><div class="entry-taxonomies"><span class="category-links term-links category-style-normal"><a class="category-link-vmware" href="/category/vmware/" rel="tag">VMware</a> | <a class="category-link-personal" href="/category/personal/" rel="tag">Personal</a> | <a class="category-link-vsphere" href="/category/vsphere/" rel="tag">vSphere</a></span></div><h3 class="entry-title"><a href="/2023/11/advanced-deploy-vmware-vsphere-7-x-3v0-22-21n/" rel="bookmark">Advanced Deploy VMware vSphere 7.x 3V0-22.21N</a></h3><div class="entry-meta entry-meta-divider-dot"><span class="posted-by"><span class="meta-label">By</span><span class="author vcard"><a class="url fn n" href="https://jameskilby.co.uk">James</a></span></span><span class="posted-on"><time class="entry-date published" datetime="2023-11-10T11:34:42+00:00" itemprop="datePublished">November 10, 2023</time><time class="updated" datetime="2023-11-17T15:19:48+00:00" itemprop="dateModified">November 17, 2023</time></span></div></header><div class="entry-summary"><p>Yesterday I sat and passed the above exam. It had been on my todo list for a good number of years. With the current pause in the Broadcom VMware takeover deal. I had some downtime and decided to use one of the three exam vouchers VMware give me each year. This upgrades me to a‚Ä¶</p></div><footer class="entry-footer"><div class="entry-actions"><p class="more-link-wrap"><a class="post-more-link" href="/2023/11/advanced-deploy-vmware-vsphere-7-x-3v0-22-21n/"> Read More<span class="screen-reader-text"> Advanced Deploy VMware vSphere 7.x 3V0-22.21N</span><span class="kadence-svg-iconset svg-baseline"><svg aria-hidden="true" class="kadence-svg-icon kadence-arrow-right-alt-svg" fill="currentColor" height="28" version="1.1" viewbox="0 0 27 28" width="27" xmlns="http://www.w3.org/2000/svg"><title>Continue</title><path d="M27 13.953c0 0.141-0.063 0.281-0.156 0.375l-6 5.531c-0.156 0.141-0.359 0.172-0.547 0.094-0.172-0.078-0.297-0.25-0.297-0.453v-3.5h-19.5c-0.281 0-0.5-0.219-0.5-0.5v-3c0-0.281 0.219-0.5 0.5-0.5h19.5v-3.5c0-0.203 0.109-0.375 0.297-0.453s0.391-0.047 0.547 0.078l6 5.469c0.094 0.094 0.156 0.219 0.156 0.359v0z"></path></svg></span></a></p></div></footer></div></article></li></ul></div></div></div></div></div></div></div></div></div></main><footer class="site-footer" id="colophon" role="contentinfo"><div class="site-footer-wrap"><div class="site-bottom-footer-wrap site-footer-row-container site-footer-focus-item site-footer-row-layout-standard site-footer-row-tablet-layout-default site-footer-row-mobile-layout-default" data-section="kadence_customizer_footer_bottom"><div class="site-footer-row-container-inner"><div class="site-container"><div class="site-bottom-footer-inner-wrap site-footer-row site-footer-row-columns-1 site-footer-row-column-layout-row site-footer-row-tablet-column-layout-default site-footer-row-mobile-column-layout-row ft-ro-dir-row ft-ro-collapse-normal ft-ro-t-dir-default ft-ro-m-dir-default ft-ro-lstyle-plain"><div class="site-footer-bottom-section-1 site-footer-section footer-section-inner-items-1"><div class="footer-widget-area site-info site-footer-focus-item content-align-default content-tablet-align-default content-mobile-align-default content-valign-default content-tablet-valign-default content-mobile-valign-default" data-section="kadence_customizer_footer_html"><div class="footer-widget-area-inner site-info-inner"><div class="footer-html inner-link-style-normal"><div class="footer-html-inner"></div></div></div></div></div></div></div></div></div></div><div class="content-formats" style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--gray-mid);"><p>Content also available in: <a href="/markdown/">Markdown</a> | <a href="/api/">JSON API</a></p></div></footer></div>
<script>document.documentElement.style.setProperty('--scrollbar-offset', window.innerWidth - document.documentElement.clientWidth + 'px' );</script>
<script type="speculationrules">
{"prefetch":[{"source":"document","where":{"and":[{"href_matches":"/*"},{"not":{"href_matches":["/wp-*.php","/wp-admin/*","/wp-content/uploads/*","/wp-content/*","/wp-content/plugins/*","/wp-content/themes/kadence/*","/*\\?(.+)"]}},{"not":{"selector_matches":"a[rel~=\"nofollow\"]"}},{"not":{"selector_matches":".no-prefetch, .no-prefetch a"}}]},"eagerness":"conservative"}]}
</script>
<div class="popup-drawer popup-drawer-layout-sidepanel popup-drawer-animation-fade popup-drawer-side-right" data-drawer-target-string="#mobile-drawer" id="mobile-drawer"><div class="drawer-overlay" data-drawer-target-string="#mobile-drawer"></div><div class="drawer-inner"><div class="drawer-header"><button aria-expanded="false" aria-label="Close menu" class="menu-toggle-close drawer-toggle" data-set-focus=".menu-toggle-open" data-toggle-body-class="showing-popup-drawer-from-right" data-toggle-target="#mobile-drawer"><span class="toggle-close-bar"></span><span class="toggle-close-bar"></span></button></div><div class="drawer-content mobile-drawer-content content-align-left content-valign-top"><div class="site-header-item site-header-focus-item site-header-item-mobile-navigation mobile-navigation-layout-stretch-false" data-section="kadence_customizer_mobile_navigation"><nav aria-label="Primary Mobile" class="mobile-navigation drawer-navigation drawer-navigation-parent-toggle-false" id="mobile-site-navigation" role="navigation"><div class="mobile-menu-container drawer-menu-container"><ul class="menu has-collapse-sub-nav" id="mobile-menu"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7329"><a href="/about-me/">About Me</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7324"><a href="/evs/">AWS EVS</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7325"><a href="/vmc/">VMC</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7327"><a href="/media/">Media</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7326"><a href="/homelab-software/">HomeLab ‚Äì Software</a></li><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-7328"><a href="/lab/">Homelab ‚Äì Hardware</a></li></ul></div></nav></div></div></div></div>
<script id="wpo_min-footer-0-js-extra">
var kadenceConfig = {"screenReader":{"expand":"Child menu","expandOf":"Child menu of","collapse":"Child menu","collapseOf":"Child menu of"},"breakPoints":{"desktop":"1024","tablet":768},"scrollOffset":"0"};
var kadenceSlideConfig = {"of":"of","to":"to","slide":"Slide","next":"Next","prev":"Previous"};
//# sourceURL=wpo_min-footer-0-js-extra
</script>
<script defer="" id="wpo_min-footer-0-js" src="/wp-content/cache/wpo-minify/1770231741/assets/wpo-minify-footer-20d41812.min.js"></script>
<script>
(function() {
    document.querySelectorAll('.copy-code-button').forEach(function(button) {
        button.addEventListener('click', function() {
            var pre = this.previousElementSibling;
            var code = pre.querySelector('code') || pre;
            var text = code.textContent || code.innerText;
            
            // Copy to clipboard
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(function() {
                    // Success feedback
                    button.textContent = '‚úÖ Copied!';
                    button.style.background = '#48bb78';
                    setTimeout(function() {
                        button.textContent = 'üìã Copy';
                        button.style.background = '#2d3748';
                    }, 2000);
                }).catch(function() {
                    button.textContent = '‚ùå Failed';
                    setTimeout(function() {
                        button.textContent = 'üìã Copy';
                    }, 2000);
                });
            } else {
                // Fallback for older browsers
                var textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    button.textContent = '‚úÖ Copied!';
                    button.style.background = '#48bb78';
                    setTimeout(function() {
                        button.textContent = 'üìã Copy';
                        button.style.background = '#2d3748';
                    }, 2000);
                } catch (err) {
                    button.textContent = '‚ùå Failed';
                    setTimeout(function() {
                        button.textContent = 'üìã Copy';
                    }, 2000);
                }
                document.body.removeChild(textarea);
            }
        });
        
        // Hover effects
        button.addEventListener('mouseenter', function() {
            this.style.opacity = '1';
            this.style.background = '#4a5568';
        });
        button.addEventListener('mouseleave', function() {
            this.style.opacity = '0.8';
            this.style.background = '#2d3748';
        });
    });
})();
</script><script data-cfasync="false" defer="" src="/js/search.js"></script>
</body></html>