{
  "slug": "hashicorp-packer",
  "title": "Template Deployment with Packer",
  "description": "Getting started with HashiCorp packer to build VMware templates",
  "date": "2021-01-21T22:26:10Z",
  "modified": "2025-12-08T12:50:22Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2021/01/hashicorp-packer/",
  "markdown_url": "/markdown/posts/hashicorp-packer.md",
  "api_url": "/api/posts/hashicorp-packer.json",
  "categories": [
    "Automation",
    "Homelab",
    "VMware",
    "Artificial Intelligence",
    "Docker",
    "Hosting",
    "VMware Cloud on AWS",
    "Runecast",
    "Ansible",
    "Containers",
    "Devops",
    "NVIDIA",
    "Traefik",
    "Storage",
    "TrueNAS Scale"
  ],
  "tags": [
    null,
    null,
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2021/01/logo_packer.png",
  "content": "![](https://jameskilby.co.uk/wp-content/uploads/2021/01/logo_packer.png)\n\n[Automation](https://jameskilby.co.uk/category/automation/) | [Homelab](https://jameskilby.co.uk/category/homelab/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Template Deployment with Packer\n\nBy[James](https://jameskilby.co.uk) January 21, 2021December 8, 2025 ‚Ä¢ üìñ2 min read(345 words)\n\nüìÖ **Published:** January 21, 2021‚Ä¢ **Updated:** December 08, 2025\n\nPacker is one of those tools I have heard about, and some of the cool people on Twitter that I follow have been using it for a while. But until now I had never played with it. That was until I saw the below tweet by the legend that is [William Lam](https://williamlam.com/)\n\n> ü§© THIS IS AWESOME ü§©  \n>   \n> For those who ‚ù§Ô∏è Automation, check out @tenthirtyam amazing repo w/working examples to build Photon OS 3/4, Ubuntu 18.04/20.04, RHEL 7/8, CentOS 7/8 & Windows Server 2016/2019 VM images using Packer & pushing to Cont Lib! Well done <https://t.co/o7FQXtrpRn>\n> \n> ‚Äî William Lam (@lamw) [November 30, 2020](https://twitter.com/lamw/status/1333546472155987969?ref_src=twsrc%5Etfw)\n\nThat was the kicker I needed to go and have a look at getting it set up and running. As I run a Mac as my main machine it was easy to get deployed following the instructions using [brew](https://brew.sh) and the GitHub Repo that William had pointed to.\n\nHowever, once I had added my vSphere credentials I was having a few issues. On execution, I was getting the error message ‚Äúdefault datacenter resolves to multiple instances‚Äù I did a bit of digging and discovered that the code didn‚Äôt specify a VMware datacenter and in my lab environment, I have 2 physical sites with a VMware datacenter in each, therefore, I needed to specify which one. Once this was fixed I started rolling out some Linux templates and it worked flawlessly until I got to the photon 4 server. I again spotted a typo and a syntax error on a command being passed into the photon VM. I corrected this and decided that actually, I should work out how to get this fixed upstream to help the wider community.\n\nOnce this was working it was onto the Windows templates. Once all the relevant ISO‚Äôs and configs were in place I was able to fully deploy 4 Windows servers that were patched and added to my content library in about 40mins. So whenever I go to deploy an Image it is always up to date‚Ä¶\n\nThanks to [Ryan](https://github.com/tenthirtyam) for an Incredible piece of work\n\n## Similar Posts\n\n  * [ ![How I Migrated from Pocket to Hoarder with AI Integration](https://jameskilby.co.uk/wp-content/uploads/2025/01/Screenshot-2025-01-29-at-23.30.47-768x411.png) ](https://jameskilby.co.uk/2025/01/how-i-migrated-from-pocket-to-hoarder-and-introduced-some-ai-along-the-way/)\n\n[Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Docker](https://jameskilby.co.uk/category/docker/) | [Hosting](https://jameskilby.co.uk/category/hosting/)\n\n### [How I Migrated from Pocket to Hoarder with AI Integration](https://jameskilby.co.uk/2025/01/how-i-migrated-from-pocket-to-hoarder-and-introduced-some-ai-along-the-way/)\n\nBy[James](https://jameskilby.co.uk) January 29, 2025January 18, 2026\n\nUpdate: Hoarder has now been renamed to Karakeep due to a trademark issue I‚Äôve been on a mission recently to regain control of my data. I haven‚Äôt yet faced the humongous task of moving my main email from Gmail, but I have had some successes with other cloud services and a win is a win‚Ä¶‚Ä¶.\n\n  * [ ![VMC Quick Sizing Guide](https://jameskilby.co.uk/wp-content/uploads/2025/02/Picture-1-e1768509620339-768x193.png) ](https://jameskilby.co.uk/2025/05/vmc-quick-sizing-guide/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [VMware Cloud on AWS](https://jameskilby.co.uk/category/vmware/vmware-cloud-on-aws/)\n\n### [VMC Quick Sizing Guide](https://jameskilby.co.uk/2025/05/vmc-quick-sizing-guide/)\n\nBy[James](https://jameskilby.co.uk) May 21, 2025July 2, 2025\n\nQuick reference guide to the available storage resources that you get in VMware Cloud on AWS\n\n  * [ ![Runecast Remediation Script‚Äôs](https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png) ](https://jameskilby.co.uk/2023/05/runecast-remediation-scripts/)\n\n[Runecast](https://jameskilby.co.uk/category/runecast/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Runecast Remediation Script‚Äôs](https://jameskilby.co.uk/2023/05/runecast-remediation-scripts/)\n\nBy[James](https://jameskilby.co.uk) May 16, 2023November 17, 2023\n\nI am a huge fan of the Runecast product and luckily as a vExpert they give out NFR licences for my lab. One of the really cool features I wanted to mention today was the remediation script function. I have been playing with storage a lot in my lab recently as part of a wider‚Ä¶\n\n  * [ ![Automating the deployment of my Homelab AI  Infrastructure](https://jameskilby.co.uk/wp-content/uploads/2026/01/VMware-NVIDIA-logos_ee2f18dc-615d-4c9e-8f11-9c3c2ce2bf37-prv-768x432.png) ](https://jameskilby.co.uk/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/)\n\n[Ansible](https://jameskilby.co.uk/category/ansible/) | [Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Containers](https://jameskilby.co.uk/category/containers/) | [Devops](https://jameskilby.co.uk/category/devops/) | [Homelab](https://jameskilby.co.uk/category/homelab/) | [NVIDIA](https://jameskilby.co.uk/category/nvidia/) | [Traefik](https://jameskilby.co.uk/category/traefik/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Automating the deployment of my Homelab AI Infrastructure](https://jameskilby.co.uk/2026/01/automating-the-deployment-of-my-ai-homelab-and-other-improvements/)\n\nBy[James](https://jameskilby.co.uk) January 15, 2026February 5, 2026\n\nIn a previous post, I wrote about using my VMware lab with an NVIDIA Tesla P4 for running some AI services. However, this deployment was done with the GPU in passthrough mode (I will refer to this a GPU). I wanted to take this to the next level and I also wanted to automate most‚Ä¶\n\n  * [ ![Using Content Libraries in VMC to deploy software faster](https://jameskilby.co.uk/wp-content/uploads/2026/01/Firefly_Gemini-Flash-768x417.png) ](https://jameskilby.co.uk/2026/01/using-content-libraries-in-vmc-to-deploy-software-faster/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [VMware Cloud on AWS](https://jameskilby.co.uk/category/vmware/vmware-cloud-on-aws/)\n\n### [Using Content Libraries in VMC to deploy software faster](https://jameskilby.co.uk/2026/01/using-content-libraries-in-vmc-to-deploy-software-faster/)\n\nBy[James](https://jameskilby.co.uk) January 27, 2026February 1, 2026\n\nHow to leverage Content Libraries to deploy into VMware Cloud on AWS faster.\n\n  * [ ![Can you really squeeze 96TB in 1U ?](https://jameskilby.co.uk/wp-content/uploads/2024/09/QuantaGrid-SD1Q-1ULH-Front-Three-Quarter.png) ](https://jameskilby.co.uk/2024/09/can-you-really-squeeze-96tb-in-1u/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/)\n\n### [Can you really squeeze 96TB in 1U ?](https://jameskilby.co.uk/2024/09/can-you-really-squeeze-96tb-in-1u/)\n\nBy[James](https://jameskilby.co.uk) September 12, 2024January 28, 2026\n\nYes, that‚Äôs a clickbait title. But technically it‚Äôs possible if I dropped all drive redundancy‚Ä¶ I recently saw an advert for a server that was just too good to be true. It promised to bring a huge amount of storage and future options in a quite hard-to-believe 1U. The price it was on offer for‚Ä¶",
  "excerpt": "![](https://jameskilby.co.uk/wp-content/uploads/2021/01/logo_packer.png)\n\n[Automation](https://jameskilby.co.uk/category/automation/) | [Homelab](https://jameskilby.co.uk/category/homelab/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Template Deployment with Packer\n\nBy[James](https://ja..."
}