{
  "slug": "hashicorp-packer",
  "title": "Template Deployment with Packer",
  "description": "Getting started with HashiCorp packer to build VMware templates",
  "date": "2021-01-21T22:26:10Z",
  "modified": "2025-12-08T12:50:22Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2021/01/hashicorp-packer/",
  "markdown_url": "/markdown/posts/hashicorp-packer.md",
  "api_url": "/api/posts/hashicorp-packer.json",
  "categories": [
    "Automation",
    "Homelab",
    "VMware",
    "Storage",
    "Runecast",
    "Artificial Intelligence",
    "Docker",
    "VCF",
    "VMware Cloud on AWS"
  ],
  "tags": [
    null,
    null,
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2021/01/logo_packer.png",
  "content": "![](https://jameskilby.co.uk/wp-content/uploads/2021/01/logo_packer.png)\n\n[Automation](https://jameskilby.co.uk/category/automation/) | [Homelab](https://jameskilby.co.uk/category/homelab/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Template Deployment with Packer\n\nBy[James](https://jameskilby.co.uk) January 21, 2021December 8, 2025 ‚Ä¢ üìñ2 min read(345 words)\n\nüìÖ **Published:** January 21, 2021‚Ä¢ **Updated:** December 08, 2025\n\nPacker is one of those tools I have heard about, and some of the cool people on Twitter that I follow have been using it for a while. But until now I had never played with it. That was until I saw the below tweet by the legend that is [William Lam](https://williamlam.com/)\n\n> ü§© THIS IS AWESOME ü§©  \n>   \n> For those who ‚ù§Ô∏è Automation, check out @tenthirtyam amazing repo w/working examples to build Photon OS 3/4, Ubuntu 18.04/20.04, RHEL 7/8, CentOS 7/8 & Windows Server 2016/2019 VM images using Packer & pushing to Cont Lib! Well done <https://t.co/o7FQXtrpRn>\n> \n> ‚Äî William Lam (@lamw) [November 30, 2020](https://twitter.com/lamw/status/1333546472155987969?ref_src=twsrc%5Etfw)\n\nThat was the kicker I needed to go and have a look at getting it set up and running. As I run a Mac as my main machine it was easy to get deployed following the instructions using [brew](https://brew.sh) and the GitHub Repo that William had pointed to.\n\nHowever, once I had added my vSphere credentials I was having a few issues. On execution, I was getting the error message ‚Äúdefault datacenter resolves to multiple instances‚Äù I did a bit of digging and discovered that the code didn‚Äôt specify a VMware datacenter and in my lab environment, I have 2 physical sites with a VMware datacenter in each, therefore, I needed to specify which one. Once this was fixed I started rolling out some Linux templates and it worked flawlessly until I got to the photon 4 server. I again spotted a typo and a syntax error on a command being passed into the photon VM. I corrected this and decided that actually, I should work out how to get this fixed upstream to help the wider community.\n\nOnce this was working it was onto the Windows templates. Once all the relevant ISO‚Äôs and configs were in place I was able to fully deploy 4 Windows servers that were patched and added to my content library in about 40mins. So whenever I go to deploy an Image it is always up to date‚Ä¶\n\nThanks to [Ryan](https://github.com/tenthirtyam) for an Incredible piece of work\n\n## Similar Posts\n\n  * [ ![TrueNAS Logo](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-22-at-18.49.21-768x198.png) ](https://jameskilby.co.uk/2023/05/homelab-storage-refresh-part-1/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/)\n\n### [Homelab Storage Refresh (Part 1)](https://jameskilby.co.uk/2023/05/homelab-storage-refresh-part-1/)\n\nBy[James](https://jameskilby.co.uk) May 23, 2023October 1, 2025\n\nTable of Contents Background ZFS Overview Read Cache (ARC and L2ARC) ZIL (ZFS Intent Log) Hardware Background I have just completed the move of all my production and media-based storage/services to TrueNAS Scale. ( I will just refer to this as TrueNAS) This is based on my HP Z840 and I have now retired my‚Ä¶\n\n  * [ ![Lab Storage](https://jameskilby.co.uk/wp-content/uploads/2023/04/81-ZoEW24UL._SL1500_-768x461.jpg) ](https://jameskilby.co.uk/2019/02/lab-storage-2/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/)\n\n### [Lab Storage](https://jameskilby.co.uk/2019/02/lab-storage-2/)\n\nBy[James](https://jameskilby.co.uk) February 10, 2019July 10, 2024\n\nLab Storage Update. Since starting my new role with Xtravirt my Homelab has gone through several fairly significant changes. At the moment it‚Äôs very much focused on the VMware stack and one of the things I needed was some more storage and especially some more storage performance. With that in mind, I purchased a new Synology‚Ä¶\n\n  * [ ![Runecast Remediation Script‚Äôs](https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png) ](https://jameskilby.co.uk/2023/05/runecast-remediation-scripts/)\n\n[Runecast](https://jameskilby.co.uk/category/runecast/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Runecast Remediation Script‚Äôs](https://jameskilby.co.uk/2023/05/runecast-remediation-scripts/)\n\nBy[James](https://jameskilby.co.uk) May 16, 2023November 17, 2023\n\nI am a huge fan of the Runecast product and luckily as a vExpert they give out NFR licences for my lab. One of the really cool features I wanted to mention today was the remediation script function. I have been playing with storage a lot in my lab recently as part of a wider‚Ä¶\n\n  * [ ![Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU](https://jameskilby.co.uk/wp-content/uploads/2024/10/pexels-tara-winstead-8386440-768x512.jpg) ](https://jameskilby.co.uk/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/)\n\n[Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Docker](https://jameskilby.co.uk/category/docker/) | [Homelab](https://jameskilby.co.uk/category/homelab/)\n\n### [Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU](https://jameskilby.co.uk/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/)\n\nBy[James](https://jameskilby.co.uk) October 11, 2024October 1, 2025\n\nArtificial intelligence is all the rage at the moment, It‚Äôs getting included in every product announcement from pretty much every vendor under the sun. Nvidia‚Äôs stock price has gone to the moon. So I thought I better get some knowledge and understand some of this. As it‚Äôs a huge field and I wasn‚Äôt exactly sure‚Ä¶\n\n  * [ ![Holodeck CPU Fixes](https://jameskilby.co.uk/wp-content/uploads/2024/01/40oOd8IipPvtrPJs-1198788743-768x737.jpg) ](https://jameskilby.co.uk/2024/01/holodeck-cpu-fixes/)\n\n[VCF](https://jameskilby.co.uk/category/vmware/vcf/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Holodeck CPU Fixes](https://jameskilby.co.uk/2024/01/holodeck-cpu-fixes/)\n\nBy[James](https://jameskilby.co.uk) January 18, 2024July 10, 2024\n\nHow to deploy Holodeck with Legacy CPU‚Äôs\n\n  * [ ![VMC Quick Sizing Guide](https://jameskilby.co.uk/wp-content/uploads/2025/02/Picture-1-e1768509620339-768x193.png) ](https://jameskilby.co.uk/2025/05/vmc-quick-sizing-guide/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [VMware Cloud on AWS](https://jameskilby.co.uk/category/vmware/vmware-cloud-on-aws/)\n\n### [VMC Quick Sizing Guide](https://jameskilby.co.uk/2025/05/vmc-quick-sizing-guide/)\n\nBy[James](https://jameskilby.co.uk) May 21, 2025July 2, 2025\n\nQuick reference guide to the available storage resources that you get in VMware Cloud on AWS",
  "excerpt": "![](https://jameskilby.co.uk/wp-content/uploads/2021/01/logo_packer.png)\n\n[Automation](https://jameskilby.co.uk/category/automation/) | [Homelab](https://jameskilby.co.uk/category/homelab/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Template Deployment with Packer\n\nBy[James](https://ja..."
}