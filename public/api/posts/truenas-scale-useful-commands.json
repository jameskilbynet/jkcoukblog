{
  "slug": "truenas-scale-useful-commands",
  "title": "TrueNAS Scale Useful Commands",
  "description": "TrueNAS Scale Useful Commands: Unlock the power of your storage with essential commands. Enhance your TrueNAS experience today!",
  "date": "2023-11-13T14:34:17Z",
  "modified": "2024-03-08T10:23:33Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2023/11/truenas-scale-useful-commands/",
  "markdown_url": "/markdown/posts/truenas-scale-useful-commands.md",
  "api_url": "/api/posts/truenas-scale-useful-commands.json",
  "categories": [
    "Kubernetes",
    "TrueNAS Scale",
    "Homelab",
    "Storage",
    "Docker",
    "Hosting",
    "VMware",
    "vSAN",
    "vSphere",
    "vExpert"
  ],
  "tags": [
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-22-at-18.49.21.png",
  "content": "![TrueNAS Logo](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-22-at-18.49.21.png)\n\n[Kubernetes](https://jameskilby.co.uk/category/kubernetes/) | [TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/)\n\n# TrueNAS Scale Useful Commands\n\nBy[James](https://jameskilby.co.uk) November 13, 2023March 8, 2024 â€¢ ðŸ“–1 min read(221 words)\n\nðŸ“… **Published:** November 13, 2023â€¢ **Updated:** March 08, 2024\n\n## Table of Contents\n\nI have very much fallen down the rabbit hole with TrueNAS and although the GUI is very good occasionally I need to jump to the command line. This is a list of the commands that I might need to use. I will update this page with anything else I find useful. \n\n## General Storage\n\nGet the compression ratio of each Pool\n    \n    \n    sudo zfs get compressratio  $PoolName\n\nðŸ“‹ Copy\n\n## Application\n\nInstall HeavyScript\n    \n    \n    curl -s https://raw.githubusercontent.com/Heavybullets8/heavy_script/main/functions/deploy.sh | bash && source \"$HOME/.bashrc\" 2>/dev/null && source \"$HOME/.zshrc\" 2>/dev/null\n\nðŸ“‹ Copy\n\nView the size of each application\n    \n    \n    zfs list $(cli -c 'app kubernetes config' | grep -E \"pool\\s\\|\" | awk -F '|' '{print $3}' | tr -d \" \\t\\n\\r\")/ix-applications/releases -r | grep pvc | awk '{print $1, $2}' | sort -hr -k2 | column -t\n\nðŸ“‹ Copy\n\nList all Pods and status\n    \n    \n    sudo k3s kubectl get pods -A\n\nðŸ“‹ Copy\n\nVerify which pool your apps are running on\n    \n    \n    cli -c 'app kubernetes config'\n\nðŸ“‹ Copy\n\nView pods and network info\n    \n    \n    k3s kubectl get pods,svc -A\n\nðŸ“‹ Copy\n\nUpdate and then prune docker containers\n    \n    \n     sudo heavyscript update -p\n\nðŸ“‹ Copy\n    \n    \n    sudo systemctl restart middlewared \n\nðŸ“‹ Copy\n\n## General ZFS\n\nShow all pools and the physical disk structure/health of all members\n    \n    \n    sudo zpool status\n\nðŸ“‹ Copy\n\nGet ZFS Compression ratio\n    \n    \n    sudo zfs get compressratio $Poolname\n\nðŸ“‹ Copy\n\n## ðŸ“š Related Posts\n\n  * [Use Portainer in a Homelab with GitHub](https://jameskilby.co.uk/2022/12/use-portainer-in-a-homelab-with-github/)\n\n## Similar Posts\n\n  * [ ![Lab Update â€“ Part 2 Storage Truenas Scale](https://jameskilby.co.uk/wp-content/uploads/2022/01/maxresdefault-768x432.jpeg) ](https://jameskilby.co.uk/2022/01/lab-update-part-2-storage/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/)\n\n### [Lab Update â€“ Part 2 Storage Truenas Scale](https://jameskilby.co.uk/2022/01/lab-update-part-2-storage/)\n\nBy[James](https://jameskilby.co.uk) January 11, 2022December 11, 2023\n\nThe HP Z840 has changed its role to a permanent storage box running Truenas Scale. This is in addition to my Synology DS918+ TrueNas is the successor to FreeNas a very popular BSD based StorageOS and TrueNas scale is a fork of this based on Linux. The Synology has been an amazing piece of kitâ€¦\n\n  * [ ![Use Portainer in a Homelab with GitHub](https://jameskilby.co.uk/wp-content/uploads/2022/12/22225832.png) ](https://jameskilby.co.uk/2022/12/use-portainer-in-a-homelab-with-github/)\n\n[Docker](https://jameskilby.co.uk/category/docker/) | [Homelab](https://jameskilby.co.uk/category/homelab/) | [Hosting](https://jameskilby.co.uk/category/hosting/) | [Kubernetes](https://jameskilby.co.uk/category/kubernetes/)\n\n### [Use Portainer in a Homelab with GitHub](https://jameskilby.co.uk/2022/12/use-portainer-in-a-homelab-with-github/)\n\nBy[James](https://jameskilby.co.uk) December 9, 2022October 1, 2025\n\nLate to the party or not, I have been using containers in my lab more and more and that has led me to Portainerâ€¦. I use it for managing the docker containers on my Synology but it can also be used for managing lots of other things. In their own words â€œPortainer accelerates container adoptionâ€¦.\n\n  * [ ![Can you really squeeze 96TB in 1U ?](https://jameskilby.co.uk/wp-content/uploads/2024/09/QuantaGrid-SD1Q-1ULH-Front-Three-Quarter.png) ](https://jameskilby.co.uk/2024/09/can-you-really-squeeze-96tb-in-1u/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/)\n\n### [Can you really squeeze 96TB in 1U ?](https://jameskilby.co.uk/2024/09/can-you-really-squeeze-96tb-in-1u/)\n\nBy[James](https://jameskilby.co.uk) September 12, 2024January 28, 2026\n\nYes, thatâ€™s a clickbait title. But technically itâ€™s possible if I dropped all drive redundancyâ€¦ I recently saw an advert for a server that was just too good to be true. It promised to bring a huge amount of storage and future options in a quite hard-to-believe 1U. The price it was on offer forâ€¦\n\n  * [ ![How to Run ZFS on VMware vSphere: Setup Guide and Best Practices](https://jameskilby.co.uk/wp-content/uploads/2024/12/ZFS.jpg) ](https://jameskilby.co.uk/2024/12/zfs-on-vmware/)\n\n[TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/) | [VMware](https://jameskilby.co.uk/category/vmware/) | [vSAN](https://jameskilby.co.uk/category/vmware/vsan-vmware/) | [vSphere](https://jameskilby.co.uk/category/vsphere/)\n\n### [How to Run ZFS on VMware vSphere: Setup Guide and Best Practices](https://jameskilby.co.uk/2024/12/zfs-on-vmware/)\n\nBy[James](https://jameskilby.co.uk) December 18, 2024January 18, 2026\n\nTable of Contents Copy-on-Write Disk IDs Trim I have run a number of systems using ZFS since the earliest days of my homelab using Nexenta, all the way back in 2010. The image below is my lab at the time with an IBM Head unit that I think had 18GB of RAMâ€¦\n\n  * [ ![Intel Optane NVMe Homelab](https://jameskilby.co.uk/wp-content/uploads/2023/04/intel_optane_ssd_900p_series_aic_-_right_angle_575px.png) ](https://jameskilby.co.uk/2023/04/intel-optane/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [vExpert](https://jameskilby.co.uk/category/vexpert/)\n\n### [Intel Optane NVMe Homelab](https://jameskilby.co.uk/2023/04/intel-optane/)\n\nBy[James](https://jameskilby.co.uk) April 17, 2023October 1, 2025\n\nI have been a VMware vExpert for many years and it has brought me many many benefits over the years. I donâ€™t think itâ€™s an understatement to say I probably wouldnâ€™t have my current role within VMware without it. One of the best benefits has been access to a huge amount of licences for VMwareâ€¦\n\n  * [ ![TrueNAS Logo](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-22-at-18.49.21-768x198.png) ](https://jameskilby.co.uk/2023/05/homelab-storage-refresh-part-1/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/)\n\n### [Homelab Storage Refresh (Part 1)](https://jameskilby.co.uk/2023/05/homelab-storage-refresh-part-1/)\n\nBy[James](https://jameskilby.co.uk) May 23, 2023October 1, 2025\n\nTable of Contents Background ZFS Overview Read Cache (ARC and L2ARC) ZIL (ZFS Intent Log) Hardware Background I have just completed the move of all my production and media-based storage/services to TrueNAS Scale. ( I will just refer to this as TrueNAS) This is based on my HP Z840 and I have now retired myâ€¦",
  "excerpt": "![TrueNAS Logo](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-22-at-18.49.21.png)\n\n[Kubernetes](https://jameskilby.co.uk/category/kubernetes/) | [TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/)\n\n# TrueNAS Scale Useful Commands\n\nBy[James](https://jameskilby.c..."
}