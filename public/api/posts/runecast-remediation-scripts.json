{
  "slug": "runecast-remediation-scripts",
  "title": "Runecast Remediation Scriptâ€™s",
  "description": "Using Runecast to autogenerate PowerCLI to remediate discovered issues",
  "date": "2023-05-16T10:38:45Z",
  "modified": "2023-11-17T15:28:57Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2023/05/runecast-remediation-scripts/",
  "markdown_url": "/markdown/posts/runecast-remediation-scripts.md",
  "api_url": "/api/posts/runecast-remediation-scripts.json",
  "categories": [
    "Runecast",
    "VMware",
    "VMware Cloud on AWS",
    "vSAN",
    "VCF",
    "Homelab",
    "Storage",
    "vExpert",
    "Networking",
    "Nutanix"
  ],
  "tags": [
    null,
    null,
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png",
  "content": "![](https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png)\n\n[Runecast](https://jameskilby.co.uk/category/runecast/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Runecast Remediation Scriptâ€™s\n\nBy[James](https://jameskilby.co.uk) May 16, 2023November 17, 2023 â€¢ ðŸ“–2 min read(442 words)\n\nðŸ“… **Published:** May 16, 2023â€¢ **Updated:** November 17, 2023\n\nI am a huge fan of the Runecast product and luckily as a vExpert they give out NFR licences for my lab. One of the really cool features I wanted to mention today was the remediation script function. \n\nI have been playing with storage a lot in my lab recently as part of a wider storage migration piece but also as part of testing Intel Optane drives. Runecast flagged up that I didnâ€™t have Storage I/O Control enabled for these data stores. It gave a great overview of what that issue means:\n\nIt is a good practice to enable SIOC, especially in environments where storage is overutilized. SIOC monitors the latency of I/Os to data stores at each ESX host sharing that device. When the average normalized datastore latency exceeds a set threshold (30ms by default), the datastore is considered to be congested, and SIOC kicks in to distribute the available storage resources to virtual machines in proportion to their shares. This is to ensure that low-priority workloads do not monopolize or reduce I/O bandwidth for high-priority workloads.\n\nBut the issue I want to highlight is it will generate the code to resolve it for you. \n\nIf I drill into the specific issue I get the below view\n\n![](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-16-at-11.31.30-1024x536.png)\n\nHere you can confirm the discovered issue and the remediation action. ( I have chosen not to enable SIOC on my ISO-NFS datastore)\n\nThe below code is what Runecast generated for me.\n    \n    \n    # Automatically generated action. Always review before executing.\n    \n    # Start of the section for Enabling of Storage IO control on datastore\n    # This action is going to be performed on the following Datastores: \"Optane-iSCSI\"\n    \n    Write-Host \"`n[RCA] Connecting to vCenter Server \"uk-poo-p-vc-1.jameskilby.cloud\"...\" -ForegroundColor Cyan\n    $vcConnection = Connect-VIServer -Server \"uk-poo-p-vc-1.jameskilby.cloud\"\n    \n    $datastoreIds = \"Datastore-datastore-50097\"\n    \n    foreach($datastoreId in $datastoreIds) \n    {\n        try \n        {\n            $ds = Get-Datastore -Id $datastoreId -ErrorAction Stop\n            Write-Host \"`n[RCA] Reconfiguring datastore with current name $($ds.name)\" -ForegroundColor Yellow\n            Write-Host \"`n[RCA] Enabling Storage I/O Control\" -ForegroundColor Yellow\n            $ds | Set-Datastore -StorageIOControlEnabled $true -ErrorAction Stop | Format-Table name,Id,StorageIOControlEnabled\n            \n        }\n        catch \n        {\n            Write-Host \"`n[RCA] Datastore with ID $datastoreId was not found or the reconfiguration failed\" -ForegroundColor Red\n        }\n        \n    }\n    \n    Write-Host \"`n[RCA] Disconnecting from vCenter Server \"uk-poo-p-vc-1.jameskilby.cloud\"...\" -ForegroundColor Cyan\n    Disconnect-VIServer $vcConnection -Confirm:$false\n    \n    # End of the section for Enabling of Storage IO control on datastore\n\nðŸ“‹ Copy\n\nDropping this into a PowerCLI session we getâ€¦.\n    \n    \n    [RCA] Connecting to vCenter Server  uk-poo-p-vc-1.jameskilby.cloud...\n    \n    Specify Credential\n    Please specify server credential\n    User: administrator@vsphere.cloud\n    Password for user administrator@vsphere.cloud: ************\n    \n    \n    [RCA] Reconfiguring datastore with current name Optane-iSCSI\n    \n    [RCA] Enabling Storage I/O Control\n    \n    Name         Id                        StorageIOControlEnabled\n    ----         --                        -----------------------\n    Optane-iSCSI Datastore-datastore-50097                    True\n    \n    \n    [RCA] Disconnecting from vCenter Server  uk-poo-p-vc-1.jameskilby.cloud...\n    PS /Users/w20kilja> \n\nðŸ“‹ Copy\n\nWhat an amazing little feature\n\n## Similar Posts\n\n  * [ ![VMC â€“ vSAN ESA](https://jameskilby.co.uk/wp-content/uploads/2023/11/OrigionalPoweredByvSAN-550x324-1.jpg) ](https://jameskilby.co.uk/2023/11/vsan-esa-and-the-improvements-it-brings-to-vmc/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [VMware Cloud on AWS](https://jameskilby.co.uk/category/vmware/vmware-cloud-on-aws/) | [vSAN](https://jameskilby.co.uk/category/vmware/vsan-vmware/)\n\n### [VMC â€“ vSAN ESA](https://jameskilby.co.uk/2023/11/vsan-esa-and-the-improvements-it-brings-to-vmc/)\n\nBy[James](https://jameskilby.co.uk) November 17, 2023July 10, 2024\n\nAn Overview of vSAN ESA in VMC \n\n  * [ ![MultiHost Holodeck VCF](https://jameskilby.co.uk/wp-content/uploads/2023/12/Holodeck-Overview.png) ](https://jameskilby.co.uk/2024/01/multihost-holodeck-vcf/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [VCF](https://jameskilby.co.uk/category/vmware/vcf/)\n\n### [MultiHost Holodeck VCF](https://jameskilby.co.uk/2024/01/multihost-holodeck-vcf/)\n\nBy[James](https://jameskilby.co.uk) January 17, 2024January 18, 2026\n\nHow to Deploy VMware Holodeck on multiple hosts\n\n  * [ ![Intel Optane NVMe Homelab](https://jameskilby.co.uk/wp-content/uploads/2023/04/intel_optane_ssd_900p_series_aic_-_right_angle_575px.png) ](https://jameskilby.co.uk/2023/04/intel-optane/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [vExpert](https://jameskilby.co.uk/category/vexpert/)\n\n### [Intel Optane NVMe Homelab](https://jameskilby.co.uk/2023/04/intel-optane/)\n\nBy[James](https://jameskilby.co.uk) April 17, 2023October 1, 2025\n\nI have been a VMware vExpert for many years and it has brought me many many benefits over the years. I donâ€™t think itâ€™s an understatement to say I probably wouldnâ€™t have my current role within VMware without it. One of the best benefits has been access to a huge amount of licences for VMwareâ€¦\n\n  * [Homelab](https://jameskilby.co.uk/category/homelab/) | [Networking](https://jameskilby.co.uk/category/networking/)\n\n### [Lab Update â€“ Part 3 Network](https://jameskilby.co.uk/2022/01/lab-update-part-3-network/)\n\nBy[James](https://jameskilby.co.uk) January 6, 2022October 1, 2025\n\nI have retired the WatchGuard Devices with the migration to PFSense running bare-metal in one of the Supermicro Nodes. I will likely virtualise this in the future. In terms of network/switching I have moved to an intermediate step here vMotion and Storage are running over DACâ€™s while VMware management and VM traffic is still overâ€¦\n\n  * [ ![Nvidia Tesla P4 Homelab Setup](https://jameskilby.co.uk/wp-content/uploads/2023/10/IMG_1107-768x403-1.jpg) ](https://jameskilby.co.uk/2023/10/vgpu-setup-in-my-homelab/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Nvidia Tesla P4 Homelab Setup](https://jameskilby.co.uk/2023/10/vgpu-setup-in-my-homelab/)\n\nBy[James](https://jameskilby.co.uk) October 23, 2023July 10, 2024\n\nA little while ago I decided to play with vGPU in my homelab. This was something I had dabbled with in the past but never really had the time or need to get working properly. The first thing that I needed was a GPU. I did have a Dell T20 with an iGPU built intoâ€¦\n\n  * [ ![New Nodes](https://jameskilby.co.uk/wp-content/uploads/2024/07/IMG_6629-768x149.jpeg) ](https://jameskilby.co.uk/2024/07/new-nodes/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Nutanix](https://jameskilby.co.uk/category/nutanix/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [New Nodes](https://jameskilby.co.uk/2024/07/new-nodes/)\n\nBy[James](https://jameskilby.co.uk) July 2, 2024January 18, 2026\n\nI recently decided to update some of my homelab hosts and I managed to do this at very little cost by offloading 2 of my Supermicro e200â€™s to fellow vExpert Paul. The below post describes what I bought why and how I have configured it. Table of Contents Node Choice Bill of Materials Rescue IPMIâ€¦",
  "excerpt": "![](https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png)\n\n[Runecast](https://jameskilby.co.uk/category/runecast/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Runecast Remediation Scriptâ€™s\n\nBy[James](https://jameskilby.co.uk) May 16, 2023November 17, 2023 â€¢ ðŸ“–2 ..."
}