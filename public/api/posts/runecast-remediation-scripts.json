{
  "slug": "runecast-remediation-scripts",
  "title": "Runecast Remediation Script‚Äôs",
  "description": "Using Runecast to autogenerate PowerCLI to remediate discovered issues",
  "date": "2023-05-16T10:38:45Z",
  "modified": "2023-11-17T15:28:57Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2023/05/runecast-remediation-scripts/",
  "markdown_url": "/markdown/posts/runecast-remediation-scripts.md",
  "api_url": "/api/posts/runecast-remediation-scripts.json",
  "categories": [
    "Runecast",
    "VMware",
    "vSAN",
    "TrueNAS Scale",
    "vSphere",
    "VMware Cloud on AWS",
    "Homelab",
    "Veeam",
    "Storage",
    "Synology"
  ],
  "tags": [
    null,
    null,
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png",
  "content": "![](https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png)\n\n[Runecast](https://jameskilby.co.uk/category/runecast/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Runecast Remediation Script‚Äôs\n\nBy[James](https://jameskilby.co.uk) May 16, 2023November 17, 2023 ‚Ä¢ üìñ2 min read(442 words)\n\nüìÖ **Published:** May 16, 2023‚Ä¢ **Updated:** November 17, 2023\n\nI am a huge fan of the Runecast product and luckily as a vExpert they give out NFR licences for my lab. One of the really cool features I wanted to mention today was the remediation script function. \n\nI have been playing with storage a lot in my lab recently as part of a wider storage migration piece but also as part of testing Intel Optane drives. Runecast flagged up that I didn‚Äôt have Storage I/O Control enabled for these data stores. It gave a great overview of what that issue means:\n\nIt is a good practice to enable SIOC, especially in environments where storage is overutilized. SIOC monitors the latency of I/Os to data stores at each ESX host sharing that device. When the average normalized datastore latency exceeds a set threshold (30ms by default), the datastore is considered to be congested, and SIOC kicks in to distribute the available storage resources to virtual machines in proportion to their shares. This is to ensure that low-priority workloads do not monopolize or reduce I/O bandwidth for high-priority workloads.\n\nBut the issue I want to highlight is it will generate the code to resolve it for you. \n\nIf I drill into the specific issue I get the below view\n\n![](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-16-at-11.31.30-1024x536.png)\n\nHere you can confirm the discovered issue and the remediation action. ( I have chosen not to enable SIOC on my ISO-NFS datastore)\n\nThe below code is what Runecast generated for me.\n    \n    \n    # Automatically generated action. Always review before executing.\n    \n    # Start of the section for Enabling of Storage IO control on datastore\n    # This action is going to be performed on the following Datastores: \"Optane-iSCSI\"\n    \n    Write-Host \"`n[RCA] Connecting to vCenter Server \"uk-poo-p-vc-1.jameskilby.cloud\"...\" -ForegroundColor Cyan\n    $vcConnection = Connect-VIServer -Server \"uk-poo-p-vc-1.jameskilby.cloud\"\n    \n    $datastoreIds = \"Datastore-datastore-50097\"\n    \n    foreach($datastoreId in $datastoreIds) \n    {\n        try \n        {\n            $ds = Get-Datastore -Id $datastoreId -ErrorAction Stop\n            Write-Host \"`n[RCA] Reconfiguring datastore with current name $($ds.name)\" -ForegroundColor Yellow\n            Write-Host \"`n[RCA] Enabling Storage I/O Control\" -ForegroundColor Yellow\n            $ds | Set-Datastore -StorageIOControlEnabled $true -ErrorAction Stop | Format-Table name,Id,StorageIOControlEnabled\n            \n        }\n        catch \n        {\n            Write-Host \"`n[RCA] Datastore with ID $datastoreId was not found or the reconfiguration failed\" -ForegroundColor Red\n        }\n        \n    }\n    \n    Write-Host \"`n[RCA] Disconnecting from vCenter Server \"uk-poo-p-vc-1.jameskilby.cloud\"...\" -ForegroundColor Cyan\n    Disconnect-VIServer $vcConnection -Confirm:$false\n    \n    # End of the section for Enabling of Storage IO control on datastore\n\nüìã Copy\n\nDropping this into a PowerCLI session we get‚Ä¶.\n    \n    \n    [RCA] Connecting to vCenter Server  uk-poo-p-vc-1.jameskilby.cloud...\n    \n    Specify Credential\n    Please specify server credential\n    User: administrator@vsphere.cloud\n    Password for user administrator@vsphere.cloud: ************\n    \n    \n    [RCA] Reconfiguring datastore with current name Optane-iSCSI\n    \n    [RCA] Enabling Storage I/O Control\n    \n    Name         Id                        StorageIOControlEnabled\n    ----         --                        -----------------------\n    Optane-iSCSI Datastore-datastore-50097                    True\n    \n    \n    [RCA] Disconnecting from vCenter Server  uk-poo-p-vc-1.jameskilby.cloud...\n    PS /Users/w20kilja> \n\nüìã Copy\n\nWhat an amazing little feature\n\n## Similar Posts\n\n  * [ ![vSAN Cluster Shutdown ‚Äì Orchestration](https://jameskilby.co.uk/wp-content/uploads/2023/11/OrigionalPoweredByvSAN-550x324-1.jpg) ](https://jameskilby.co.uk/2025/12/vsan-cluster-shutdown/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [vSAN](https://jameskilby.co.uk/category/vmware/vsan-vmware/)\n\n### [vSAN Cluster Shutdown ‚Äì Orchestration](https://jameskilby.co.uk/2025/12/vsan-cluster-shutdown/)\n\nBy[James](https://jameskilby.co.uk) December 6, 2025January 17, 2026\n\nHow to safety shutdown a vSAN Environment\n\n  * [ ![How to Run ZFS on VMware vSphere: Setup Guide and Best Practices](https://jameskilby.co.uk/wp-content/uploads/2024/12/ZFS.jpg) ](https://jameskilby.co.uk/2024/12/zfs-on-vmware/)\n\n[TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/) | [VMware](https://jameskilby.co.uk/category/vmware/) | [vSAN](https://jameskilby.co.uk/category/vmware/vsan-vmware/) | [vSphere](https://jameskilby.co.uk/category/vsphere/)\n\n### [How to Run ZFS on VMware vSphere: Setup Guide and Best Practices](https://jameskilby.co.uk/2024/12/zfs-on-vmware/)\n\nBy[James](https://jameskilby.co.uk) December 18, 2024January 18, 2026\n\nTable of Contents Copy-on-Write Disk IDs Trim I have run a number of systems using ZFS since the earliest days of my homelab using Nexenta, all the way back in 2010. The image below is my lab at the time with an IBM Head unit that I think had 18GB of RAM‚Ä¶\n\n  * [ ![VMC New Host -i3en](https://jameskilby.co.uk/wp-content/uploads/2022/11/iu-1-768x395.png) ](https://jameskilby.co.uk/2020/07/i3en/)\n\n[VMware](https://jameskilby.co.uk/category/vmware/) | [VMware Cloud on AWS](https://jameskilby.co.uk/category/vmware/vmware-cloud-on-aws/)\n\n### [VMC New Host -i3en](https://jameskilby.co.uk/2020/07/i3en/)\n\nBy[James](https://jameskilby.co.uk) July 2, 2020July 10, 2024\n\nVMware Cloud on AWS (VMC) has introduced a new host to its lineup the ‚Äúi3en‚Äù. This is based on the i3en.metal AWS instance. The specifications are certainly impressive packing in 96 logical cores, 768GiB RAM, and approximately 45.84 TiB of NVMe raw storage capacity per host. It‚Äôs certainly a monster with a 266% uplift in‚Ä¶\n\n  * [Homelab](https://jameskilby.co.uk/category/homelab/) | [Veeam](https://jameskilby.co.uk/category/veeam/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Lab Update ‚Äì Desired Workloads](https://jameskilby.co.uk/2022/01/lab-update-part-5-desired-workloads/)\n\nBy[James](https://jameskilby.co.uk) January 6, 2022November 11, 2023\n\nMy lab is always undergoing change. Partially as I want to try new things or new ways of doing things. Sometimes because I break things (not always by accident) sometimes it‚Äôs a great way to learn‚Ä¶. I decided to list the workloads I am looking to run (some of these are already in place) Infrastucture‚Ä¶\n\n  * [ ![Can you really squeeze 96TB in 1U ?](https://jameskilby.co.uk/wp-content/uploads/2024/09/QuantaGrid-SD1Q-1ULH-Front-Three-Quarter.png) ](https://jameskilby.co.uk/2024/09/can-you-really-squeeze-96tb-in-1u/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [TrueNAS Scale](https://jameskilby.co.uk/category/truenas-scale/)\n\n### [Can you really squeeze 96TB in 1U ?](https://jameskilby.co.uk/2024/09/can-you-really-squeeze-96tb-in-1u/)\n\nBy[James](https://jameskilby.co.uk) September 12, 2024January 28, 2026\n\nYes, that‚Äôs a clickbait title. But technically it‚Äôs possible if I dropped all drive redundancy‚Ä¶ I recently saw an advert for a server that was just too good to be true. It promised to bring a huge amount of storage and future options in a quite hard-to-believe 1U. The price it was on offer for‚Ä¶\n\n  * [Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [Synology](https://jameskilby.co.uk/category/synology/)\n\n### [Lab Storage](https://jameskilby.co.uk/2018/01/lab-storage/)\n\nBy[James](https://jameskilby.co.uk) January 6, 2018July 10, 2024\n\nI have been meaning to post around some of the lab setup for a while. Although it changes frequently at present it‚Äôs as below. I will add some pics when I have tidied up the lab/cables My primary lab storage is all contained within an HP Gen8 Microserver. Currently Configured: 1x INTEL Core i3-4130 running at‚Ä¶",
  "excerpt": "![](https://jameskilby.co.uk/wp-content/uploads/2023/05/Runecast-Solutions-Ltd.png)\n\n[Runecast](https://jameskilby.co.uk/category/runecast/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# Runecast Remediation Script‚Äôs\n\nBy[James](https://jameskilby.co.uk) May 16, 2023November 17, 2023 ‚Ä¢ üìñ2 ..."
}