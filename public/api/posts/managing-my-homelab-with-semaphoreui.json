{
  "slug": "managing-my-homelab-with-semaphoreui",
  "title": "Managing my Homelab with SemaphoreUI",
  "description": "Learn to manage your homelab using SemaphoreUI with Docker. Follow our guide to streamline your DevOps tools like Ansible and Terraform today!",
  "date": "2025-09-02T16:01:48Z",
  "modified": "2025-12-18T00:03:28Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2025/09/managing-my-homelab-with-semaphoreui/",
  "markdown_url": "/markdown/posts/managing-my-homelab-with-semaphoreui.md",
  "api_url": "/api/posts/managing-my-homelab-with-semaphoreui.json",
  "categories": [
    "Ansible",
    "Homelab",
    "VCF",
    "VMware",
    "Artificial Intelligence",
    "Docker",
    "Nutanix",
    "Storage",
    "vExpert",
    "Networking",
    "Hosting"
  ],
  "tags": [
    null,
    null,
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2025/07/semaphore.png",
  "content": "![](https://jameskilby.co.uk/wp-content/uploads/2025/07/semaphore.png)\n\n[Ansible](https://jameskilby.co.uk/category/ansible/) | [Homelab](https://jameskilby.co.uk/category/homelab/)\n\n# Managing my Homelab with SemaphoreUI\n\nBy[James](https://jameskilby.co.uk) September 2, 2025December 18, 2025 ‚Ä¢ üìñ8 min read(1,592 words)\n\nüìÖ **Published:** September 02, 2025‚Ä¢ **Updated:** December 18, 2025\n\nI recently stumbled across [Semaphore](https://docs.semaphoreui.com), which is essentially a frontend for managing DevOps tooling, including Ansible, Terraform, OpenTofu, and PowerShell.\n\nIt‚Äôs easy to deploy in Docker, and I am slowly moving more of my homelab management over to it.\n\n## Introduction\n\nThis is a guide to show you how to get up and running easily with SemaphoreUI in Docker and use it to execute a basic Ansible playbook to deploy Docker onto an Ubuntu Server.\n\n## Table of Contents\n\n## Pre-reqs\n\n  * Somewhere to run your Semaphore server. I chose to use a Docker container on one of my existing hosts.\n  * Git Repo. I am using GitHub. My code is all stored in a public repo [here](https://github.com/jameskilbynet/iac/) so others can follow along.\n  * SSH Keys/Authentication into the server to be provisioned.\n\n## Docker Configuration \n\nThis is the config that I am using (with some environment variables obscured). If you want to build your own docker run or compose file they have built a [website](https://semaphoreui.com/install/docker/2_15/) that helps you build your docker configuration. I love this. That is what I used to build the below config. \n    \n    \n    services:\n        semaphore:\n            image: semaphoreui/semaphore:v2.15.12-powershell7.5.0\n            labels:\n              - \"com.example.description=semaphore\"\n              - \"traefik.enable=true\"\n              - \"traefik.http.routers.semaphore.rule=Host(`semaphore.jameskilby.cloud`)\"\n              - \"traefik.http.routers.semaphore.entrypoints=https\"\n              - \"traefik.http.routers.semaphore.tls=true\"\n              - \"traefik.http.routers.semaphore.tls.certresolver=cloudflare\"\n              - \"traefik.http.services.semaphore.loadbalancer.server.port=3000\"\n            networks:\n              traefik:\n            environment:\n                SEMAPHORE_DB_DIALECT: bolt\n                SEMAPHORE_ADMIN: admin\n                SEMAPHORE_ADMIN_PASSWORD: XXXXXX\n                SEMAPHORE_ADMIN_NAME: James\n                SEMAPHORE_ADMIN_EMAIL: email@jameskilby.cloud\n                SEMAPHORE_RUNNER_REGISTRATION_TOKEN: \"mwsEdFU51pZDjkZsDsmws8yOvfdvdf\"\n                SEMAPHORE_EMAIL_SENDER: \"semaphore@jameskilby.cloud\"\n                SEMAPHORE_EMAIL_HOST: \"mail.jameskilby.cloud\"\n                SEMAPHORE_EMAIL_PORT: \"25\"\n                SEMAPHORE_EMAIL_SECURE: \"True\"\n            volumes:\n                - semaphore_data:/var/lib/semaphore\n                - semaphore_config:/etc/semaphore\n                - semaphore_tmp:/tmp/semaphore\n    volumes:\n        semaphore_data:\n        semaphore_config:\n        semaphore_tmp:\n    \n    networks:\n      traefik:\n        external: true\n\nüìã Copy\n\n## Playbook Walkthrough\n\nOnce Semaphore is up and running, you can start setting up your automation pipelines. I will step through an example Ansible Playbook to deploy Docker. This playbook can be found [here](https://github.com/jameskilbynet/iac/blob/b65d7f8d014cb5458c74f5188798b3129387f36e/ansible/docker/install_docker.yml). Let me walk you through the playbook, then we will demonstrate using Semaphore to execute this.\n\n### Playbook Metadata\n    \n    \n    - name: Install Docker on supported Ubuntu hosts\n      hosts: all\n      become: yes\n\nüìã Copy\n\nThis defines the hosts to run the playbook on (for now, this should just be set to all), and the become option allows it to become root if needed.\n    \n    \n    vars:\n      docker_gpg_path: /etc/apt/keyrings/docker.gpg\n      docker_repo: \"deb [arch=amd64 signed-by={{ docker_gpg_path }}] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable\"\n\nüìã Copy\n\nThis defines the variables of where we will store the Docker GPG Key and the Docker repo\n\nWe then use Ansible to define some variables and to ensure we are getting the correct Docker release based on the Version of Ubuntu.\n\n### Define Variables\n    \n    \n    tasks:\n        - name: Ensure required system packages are present\n          apt:\n            name:\n              - apt-transport-https\n              - ca-certificates\n              - curl\n              - gnupg\n              - lsb-release\n            state: present\n            update_cache: yes\n    \n\nüìã Copy\n\nThe next block ensures that the required packages are present on the system.\n\n### Handle reboots\n    \n    \n    - name: Check if a reboot is required\n      stat:\n        path: /var/run/reboot-required\n      register: reboot_required\n    \n    - name: Reboot the machine if required\n      reboot:\n        msg: \"Reboot initiated by Ansible due to package upgrade.\"\n        pre_reboot_delay: 60\n        reboot_timeout: 600\n        post_reboot_delay: 60\n      when: reboot_required.stat.exists\n\nüìã Copy\n\n### Preps APT and stores GPG Keys\n    \n    \n    - name: Ensure /etc/apt/keyrings directory exists\n      file:\n        path: /etc/apt/keyrings\n        state: directory\n        mode: '0755'\n    - name: Download Docker GPG key in dearmored format\n      shell: |\n        curl -fsSL https://download.docker.com/linux/ubuntu/gpg | gpg --dearmor -o {{ docker_gpg_path }}\n      args:\n        creates: \"{{ docker_gpg_path }}\"\n    - name: Set permissions on Docker GPG key\n      file:\n        path: \"{{ docker_gpg_path }}\"\n        mode: '0644'\n    - name: Set permissions on Docker GPG key\n      file:\n        path: \"{{ docker_gpg_path }}\"\n        mode: '0644'\n    \n\nüìã Copy\n\n### Install Docker and ensure it‚Äôs running\n    \n    \n        - name: Install Docker Engine and related packages\n          apt:\n            name:\n              - docker-ce\n              - docker-ce-cli\n              - containerd.io\n              - docker-buildx-plugin\n              - docker-compose-plugin\n            state: latest\n    \n        - name: Ensure Docker service is running and enabled\n          service:\n            name: docker\n            state: started\n            enabled: true\n\nüìã Copy\n\n# Semaphore Concepts\n\nSo now that we understand the playbook, let‚Äôs go over some of the Semaphore concepts\n\n### Projects\n\nFirst we need a project. A project is used for separating out management activity. This could be as Prod/Test/Dev etc or for managing different systems or applications. To keep everything easy right now I am running everything in a single project. I will likely split this out a bit later.\n\n### Task Templates\n\nThe task templates are the actions that we want Sempahore to perform for us. In the example, I will just be using it to deploy Docker onto host‚Äôs specified in the Inventory.\n\n### Schedule\n\nA schedule is an easy way to run a specified task repeatedly. Fairly self-explanatory, I am using this to run a weekly patching schedule on most of my Ubuntu servers.\n\n### Inventory\n\nThe Inventory specifies hosts to be managed with the appropriate credentials.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/Sempahore-Inventory.png)\n\n### Variable Groups\n\nVariable Groups are used for storing additional variables for an inventory. They must be in the JSON format.\n\nI am not using these as part of my Docker example.\n\n### Key Store\n\nThe key store is for storing all credentials. This is for connecting to remote hosts to execute jobs but also for accessing code repositories. \n\n### Repositories\n\nA repository defines where the code that Semaphore executes lives. It‚Äôs possible to have multiple repo‚Äôs connected. I have a single one defined, and I am using a public repo for two reasons. Firstly, so anyone else can copy the configuration I am using. Secondly to enforce me being more secure and not putting any secrets in any of the code. Something that I sometimes do for speed with my lab.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/07/Semaphore-Repo-1024x80.png)\n\n## Execute\n\nNow that we have gone over the basic concepts. Let‚Äôs deploy Docker using Semaphore.\n\nFor testing, I have spun up a Vanilla Ubuntu 24.04 server to be used as the Docker server and created a new Project to ensure that we are starting from scratch.\n\n## Repositories\n\n### Connect your repository \n\nStep 1: Connect your repository\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/New-Repo-1024x350.png)\n\nAnd define the appropriate config. I am just using the Main branch and require no authentication as it‚Äôs a public GitHub repo\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/Repo-Settings.png)\n\n## Update your Key Store\n\nStep 2\n\nCreate the credentials for Semiphore to authenticate against your remote server. \n\nI am using SSH keys to authenticate against the system, and the account can elevate without a password\n\n## Define your Inventory\n\nStep 3 is to define the Inventory of systems you want the task to be run against.\n\nThis requires a name and the user credentials defined in step 2.\n\nFor demo purposes, I am just using the IP address of the remote server. All of my homelab servers are connected via DNS, and I am using a simple static list. \n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/Ansible-Inventory.png)\n\n## Define the task you want to run\n\nGo to the ‚ÄúTask Templates‚Äù section, select a new template and then select Ansible Playbook\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/Screenshot-2025-09-02-at-13.28.53.png)\n\nAdd the required variables; for this particular task, only a few are needed.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/Docker-Task-1-1024x553.png)\n\nOnce the task is created, simply press the play button to execute it.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2025/09/Task-Running.png)\n\nSemaphore will clone the GitHub repo and then start executing the tasks defined in the Ansible playbook as can be seen above. The big green success button at the top tells you that all of the tasks executed successfully. \n\nAs the playbook rolls off the screen I have a copy of it in full that can be seen below.\n    \n    \n    4:33:00 PM\n    Task 2147483445 added to queue\n    4:33:00 PM\n    Started: 2147483445\n    4:33:00 PM\n    Run TaskRunner with template: Install Docker\n    4:33:00 PM\n    Preparing: 2147483445\n    4:33:00 PM\n    Cloning Repository https://github.com/jameskilbynet/iac\n    4:33:00 PM\n    Cloning into 'repository_1_template_1'...\n    4:33:01 PM\n    Get current commit hash\n    4:33:01 PM\n    Get current commit message\n    4:33:01 PM\n    installing static inventory\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/ansible/docker/collections/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/ansible/docker/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/collections/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/ansible/docker/roles/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/ansible/docker/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/roles/requirements.yml file found. Skip galaxy install process.\n    4:33:01 PM\n    No /tmp/semaphore/project_2/repository_1_template_1/requirements.yml file found. Skip galaxy install process.\n    4:33:02 PM\n    4:33:02 PM\n    PLAY [Install Docker on supported Ubuntu hosts] ********************************\n    4:33:02 PM\n    4:33:02 PM\n    TASK [Gathering Facts] *********************************************************\n    4:33:06 PM\n    [WARNING]: Platform linux on host 192.168.38.146 is using the discovered Python\n    4:33:06 PM\n    ok: [192.168.38.146]\n    4:33:06 PM\n    interpreter at /usr/bin/python3.12, but future installation of another Python\n    4:33:06 PM\n    interpreter could change the meaning of that path. See\n    4:33:06 PM\n    https://docs.ansible.com/ansible-\n    4:33:06 PM\n    core/2.18/reference_appendices/interpreter_discovery.html for more information.\n    4:33:06 PM\n    4:33:06 PM\n    TASK [Ensure required system packages are present] *****************************\n    4:33:13 PM\n    changed: [192.168.38.146]\n    4:33:13 PM\n    4:33:13 PM\n    TASK [Check if a reboot is required] *******************************************\n    4:33:14 PM\n    ok: [192.168.38.146]\n    4:33:14 PM\n    4:33:14 PM\n    TASK [Reboot the machine if required] ******************************************\n    4:34:31 PM\n    changed: [192.168.38.146]\n    4:34:31 PM\n    4:34:31 PM\n    TASK [Ensure /etc/apt/keyrings directory exists] *******************************\n    4:34:32 PM\n    ok: [192.168.38.146]\n    4:34:32 PM\n    4:34:32 PM\n    TASK [Download Docker GPG key in dearmored format] *****************************\n    4:34:33 PM\n    changed: [192.168.38.146]\n    4:34:33 PM\n    4:34:33 PM\n    TASK [Set permissions on Docker GPG key] ***************************************\n    4:34:33 PM\n    ok: [192.168.38.146]\n    4:34:33 PM\n    4:34:33 PM\n    TASK [Add Docker APT repository] ***********************************************\n    4:34:42 PM\n    changed: [192.168.38.146]\n    4:34:42 PM\n    4:34:42 PM\n    TASK [Update APT cache] ********************************************************\n    4:34:43 PM\n    ok: [192.168.38.146]\n    4:34:43 PM\n    4:34:43 PM\n    TASK [Install Docker Engine and related packages] ******************************\n    4:35:04 PM\n    changed: [192.168.38.146]\n    4:35:04 PM\n    4:35:04 PM\n    TASK [Ensure Docker service is running and enabled] ****************************\n    4:35:06 PM\n    ok: [192.168.38.146]\n    4:35:06 PM\n    4:35:06 PM\n    PLAY RECAP *********************************************************************\n    4:35:06 PM\n    192.168.38.146             : ok=11   changed=5    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   \n    4:35:06 PM\n    \n\nüìã Copy\n\n## Wrap Up\n\nI have been really impressed with Sempahore and am migrating more and more of my lab control into it. I might write some more posts on how I am using it for more complex tasks. The one thing I wish it could do natively is Packer for building templates, but just with Terraform and Ansible, it is making my life so much easier.\n\n## Similar Posts\n\n  * [ ![Holodeck CPU Fixes](https://jameskilby.co.uk/wp-content/uploads/2024/01/40oOd8IipPvtrPJs-1198788743-768x737.jpg) ](https://jameskilby.co.uk/2024/01/holodeck-cpu-fixes/)\n\n[VCF](https://jameskilby.co.uk/category/vmware/vcf/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Holodeck CPU Fixes](https://jameskilby.co.uk/2024/01/holodeck-cpu-fixes/)\n\nBy[James](https://jameskilby.co.uk) January 18, 2024July 10, 2024\n\nHow to deploy Holodeck with Legacy CPU‚Äôs\n\n  * [ ![Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU](https://jameskilby.co.uk/wp-content/uploads/2024/10/pexels-tara-winstead-8386440-768x512.jpg) ](https://jameskilby.co.uk/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/)\n\n[Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Docker](https://jameskilby.co.uk/category/docker/) | [Homelab](https://jameskilby.co.uk/category/homelab/)\n\n### [Self Hosting AI Stack using vSphere, Docker and NVIDIA GPU](https://jameskilby.co.uk/2024/10/self-hosting-ai-stack-using-vsphere-docker-and-nvidia-gpu/)\n\nBy[James](https://jameskilby.co.uk) October 11, 2024October 1, 2025\n\nArtificial intelligence is all the rage at the moment, It‚Äôs getting included in every product announcement from pretty much every vendor under the sun. Nvidia‚Äôs stock price has gone to the moon. So I thought I better get some knowledge and understand some of this. As it‚Äôs a huge field and I wasn‚Äôt exactly sure‚Ä¶\n\n  * [ ![Nutanix CE](https://jameskilby.co.uk/wp-content/uploads/2020/07/nutanix-logo-HI-REZ_reverse-w-carrier-768x196.jpg) ](https://jameskilby.co.uk/2018/01/nutanix-ce/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Nutanix](https://jameskilby.co.uk/category/nutanix/)\n\n### [Nutanix CE](https://jameskilby.co.uk/2018/01/nutanix-ce/)\n\nBy[James](https://jameskilby.co.uk) January 6, 2018July 10, 2024\n\nI ran a Nutanix CE server at home for a little while when it first came out. However, due to the fairly high requirements, it didn‚Äôt make sense to me to continue running it at home. This was compounded by the fact that I have many clusters to play with at work. These all run my‚Ä¶\n\n  * [ ![Intel Optane NVMe Homelab](https://jameskilby.co.uk/wp-content/uploads/2023/04/intel_optane_ssd_900p_series_aic_-_right_angle_575px.png) ](https://jameskilby.co.uk/2023/04/intel-optane/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/) | [vExpert](https://jameskilby.co.uk/category/vexpert/)\n\n### [Intel Optane NVMe Homelab](https://jameskilby.co.uk/2023/04/intel-optane/)\n\nBy[James](https://jameskilby.co.uk) April 17, 2023October 1, 2025\n\nI have been a VMware vExpert for many years and it has brought me many many benefits over the years. I don‚Äôt think it‚Äôs an understatement to say I probably wouldn‚Äôt have my current role within VMware without it. One of the best benefits has been access to a huge amount of licences for VMware‚Ä¶\n\n  * [Homelab](https://jameskilby.co.uk/category/homelab/) | [Networking](https://jameskilby.co.uk/category/networking/)\n\n### [Lab Update ‚Äì Part 3 Network](https://jameskilby.co.uk/2022/01/lab-update-part-3-network/)\n\nBy[James](https://jameskilby.co.uk) January 6, 2022October 1, 2025\n\nI have retired the WatchGuard Devices with the migration to PFSense running bare-metal in one of the Supermicro Nodes. I will likely virtualise this in the future. In terms of network/switching I have moved to an intermediate step here vMotion and Storage are running over DAC‚Äôs while VMware management and VM traffic is still over‚Ä¶\n\n  * [ ![How I Migrated from Pocket to Hoarder with AI Integration](https://jameskilby.co.uk/wp-content/uploads/2025/01/Screenshot-2025-01-29-at-23.30.47-768x411.png) ](https://jameskilby.co.uk/2025/01/how-i-migrated-from-pocket-to-hoarder-and-introduced-some-ai-along-the-way/)\n\n[Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Docker](https://jameskilby.co.uk/category/docker/) | [Hosting](https://jameskilby.co.uk/category/hosting/)\n\n### [How I Migrated from Pocket to Hoarder with AI Integration](https://jameskilby.co.uk/2025/01/how-i-migrated-from-pocket-to-hoarder-and-introduced-some-ai-along-the-way/)\n\nBy[James](https://jameskilby.co.uk) January 29, 2025January 18, 2026\n\nUpdate: Hoarder has now been renamed to Karakeep due to a trademark issue I‚Äôve been on a mission recently to regain control of my data. I haven‚Äôt yet faced the humongous task of moving my main email from Gmail, but I have had some successes with other cloud services and a win is a win‚Ä¶‚Ä¶.",
  "excerpt": "![](https://jameskilby.co.uk/wp-content/uploads/2025/07/semaphore.png)\n\n[Ansible](https://jameskilby.co.uk/category/ansible/) | [Homelab](https://jameskilby.co.uk/category/homelab/)\n\n# Managing my Homelab with SemaphoreUI\n\nBy[James](https://jameskilby.co.uk) September 2, 2025December 18, 2025 ‚Ä¢ üìñ8 m..."
}