{
  "slug": "new-nodes",
  "title": "New Nodes",
  "description": "Nutanix Homelab,New Nodes: Learn how I upgraded my setup with cost-effective Nutanix nodes. Get insights on configuration and setup now!",
  "date": "2024-07-02T08:01:04Z",
  "modified": "2026-01-18T21:39:50Z",
  "author": "James Kilby",
  "url": "https://jameskilby.co.uk/2024/07/new-nodes/",
  "markdown_url": "/markdown/posts/new-nodes.md",
  "api_url": "/api/posts/new-nodes.json",
  "categories": [
    "Homelab",
    "Nutanix",
    "VMware",
    "Artificial Intelligence",
    "Docker",
    "Hosting",
    "Storage",
    "Personal"
  ],
  "tags": [
    null,
    null,
    null
  ],
  "image": "https://jameskilby.co.uk/wp-content/uploads/2024/04/Screenshot-2024-04-06-at-22.50.57.png",
  "content": "![](https://jameskilby.co.uk/wp-content/uploads/2024/07/IMG_6629-scaled.jpeg)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Nutanix](https://jameskilby.co.uk/category/nutanix/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# New Nodes\n\nBy[James](https://jameskilby.co.uk) July 2, 2024January 18, 2026 ‚Ä¢ üìñ7 min read(1,482 words)\n\nüìÖ **Published:** July 02, 2024‚Ä¢ **Updated:** January 18, 2026\n\nI recently decided to update some of my homelab hosts and I managed to do this at very little cost by offloading 2 of my [Supermicro e200‚Äôs](https://www.supermicro.com/en/products/system/mini-itx/sys-e200-8d.cfm) to fellow vExpert [Paul](https://ssh.guru). The below post describes what I bought why and how I have configured it.\n\n## Table of Contents\n\n## Node Choice\n\nI have been very happy with the Supermicro Twin concept having run this for a few years. So I decided I would stick with it/ For anyone not familiar you get upto 4 compute nodes running in a 2U setup. It‚Äôs a very dense format and as a number of components are shared I believe it‚Äôs very power efficient. Looking at the available nodes on eBay and second hand marketplaces I spotted several Nutanix nodes at a decent price. I ended up buying a 3 node NX-1365-G4 setup. These came with CPU, Memory and NICs. I decided to purchase some Enterprise SATA SSDs and utilised some of the existing consumer-based SSDs I had as storage. I then purchased some SATADom‚Äôs to use as the Boot device.\n\nOne of the really nice features is that the IPMI is sort of cluster aware. From a single location you can view the power usage (and health) of all of the nodes. In the below image I was logged into the IPMI for Node A but had a view of Node B and C.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/04/Screenshot-2024-04-06-at-22.50.57.png)\n\nI have chosen to deploy Nutanix Community Edition on these nodes but still retain vSphere as the underlying hypervisor. I am very familiar with this configuration having run it in a production at a service provider for a couple of years. This also gives me the additional Storage capacity of the Enterprise SSD‚Äôs something that would not be available had I chose to deploy vSAN OSA. I am not certain the hardware will run vSAN ESA but I will likely try this at some point. This also allowed me to plugin external NFS or iSCSI storage into vSphere. Something I am not certain Is possible if AHV was the underlying Hypervisor.\n\n## Bill of Materials\n\nDescription| Quantity| Component Price ¬£| Line Total ¬£| Sourced from  \n---|---|---|---|---  \n3x Nutanix nodes | 1 | 563.76 | 563.76 | Ebay  \n1TB Samsung enterprise SATA SSD | 3 | 40.00 | 120.00 | Ebay  \n2TB Samsung EVO Consumer SATA SSD | 6 | 150.00 | 900.00 | Removed from TrueNAS   \n(Not included in total cost)  \n32GB SATADom | 3 | 42.00 | 126.00 | Ebay  \nSSD Caddy | 9 | 10.00 | 90.00 | Ebay  \nQSFP28 to SFP+ Breakout cable | 1 | 29.99 | 29.99 | Ebay  \n|  |  |  |   \nTotal |  |  | 929.75 |   \n  \n## Rescue IPMI\n\nThe IPMI in the nodes were set to ipv6 only and I didn‚Äôt know the password. To set them to DHCP was easy in the bios, however you can‚Äôt set the password from the bios. To reset the password‚Äôs I resorted to using the [IPMItool](https://github.com/ipmitool/ipmitool). Due to some security [changes](https://vswitchzero.com/ipmitool-vib/) in ESXi8 it was necessary to install ESXi7 to reset the password.\n\nTo do this I did a vanilla install of ESXi then uploaded the ipmitool to the datastore before running the below command\n    \n    \n    /opt/ipmitool/ipmitool raw 0x30 0x40\n\nüìã Copy\n\nThis set the IPMI to factory defaults and took about 30 seconds to complete. From there I could configure as required.\n\n## Nutanix CE install Overview\n\nThe next step was the install of Nutanix CE. This requires deploying the installer to a suitable USB or similar device. As I wanted to utilise ESXi as the underlying Hypervisor an additional step is needed you need to have the ESXi installer ISO available on a webserver.\n\nIts useful to plan your IP address‚Äôs in advance. This is what I used\n\nNODE| ESX MANAGEMENT| CVM| DNS Record  \n---|---|---|---  \nNODE A | 192.168.38.171 | 192.168.38.172 | uk-bhr-p-ntnx-a.jameskilby.cloud  \nNODE B | 192.168.38.173 | 192.168.38.174 | uk-bhr-p-ntnx-b.jameskilby.cloud  \nNODE C | 192.168.38.174 | 192.168.38.175 | uk-bhr-p-ntnx-c.jameskilby.cloud  \n  \n## Web Server\n\nFor this I used an existing windows server and added the IIS role. I then uploaded the ISO to the IIS directory. An additional step is to add the correct MIME type.\n\nYou must add the correct MIME type for the file you‚Äôre trying to download.\n\nFrom IIS Manager, go to Sites > YOUR_SITE> and in the features view, double-click MIME Types.\n\nUnder actions, click Add.\n\nEnter the file extension **iso** and the MIME type **application/octetstream**\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/06/mimetype.jpg)\n\n## Install\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/04/Screenshot-2024-04-05-at-11.57.17.png)\n\nThe install is fairly straight forward if your default access vlan is the one you want to run Nutanix on. In the end I changed the switch port vlan configuration to this however it doesn‚Äôt match the rest of my other VMware setup. As I wanted to create a 3 node configuration I have not selected the Create single-node cluster option.\n\nWith the ESXi option selected make sure you have the correct URL as it takes ages to time out if its incorrect. The webserver needs to be accessible from the IP range the host/cvm will be provisioned from so for ease I kept everything in the same Layer 2 domain.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/04/Screenshot-2024-04-05-at-13.21.24-1024x700.png)\n\nSuccessful Install\n\nOnce the install is complete it will ask you to reboot as seen above\n\nIt will then boot into the ESXi Hypervisor. Once this happens be patient as Nutanix will configure all of the relevant settings on the host (network config etc) utilising a kick start file. It will then deploy the CVM. The host will also restart automatically as part of this process.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/04/Screenshot-2024-04-05-at-12.18.02-1.png)\n\nSome of the configuration taking place\n\n## Cluster Creation\n\nWhen all of the nodes are imaged the next step is to create the Nutanix Cluster.\n\nSSH into any of the CVM‚Äôs as the user nutanix with a password of nutanix/4u\n\nThen execute the following command utilising your CVM Ip address‚Äôs\n    \n    \n    cluster -s 192.168.38.171,192.168.38.173,192.168.38.175 create\n\nüìã Copy\n\nCluster succeed in creating will look similar to the below.\n\nIf you have errors with this step the most likely cause is physical network configuration.\n    \n    \n    VM: 192.168.38.175 Up\n    \t\t                Zeus   UP\t[8656, 8704, 8705, 8706, 8715, 8733]\t\n    \t\t           Scavenger   UP\t[12061, 12187, 12188, 12189]\t\n    \t\t              Xmount   UP\t[12058, 12159, 12160, 12259]\t\n    \t\t    SysStatCollector   UP\t[14106, 14240, 14241, 14242]\t\n    \t\t           IkatProxy   UP\t[15420, 15555, 15556, 15557]\t\n    \t\t    IkatControlPlane   UP\t[16277, 16378, 16379, 16382]\t\n    \t\t       SSLTerminator   UP\t[16308, 16510, 16511]\t\n    \t\t      SecureFileSync   UP\t[16445, 16586, 16587, 16588]\t\n    \t\t              Medusa   UP\t[16665, 16804, 16805, 16807, 17410]\t\n    \t\t  DynamicRingChanger   UP\t[19169, 19305, 19306, 19346]\t\n    \t\t              Pithos   UP\t[19264, 19471, 19472, 19484]\t\n    \t\t          InsightsDB   UP\t[19340, 19550, 19551, 19566]\t\n    \t\t              Athena   UP\t[19500, 19645, 19646, 19647]\t\n    \t\t             Mercury   UP\t[27637, 27684, 27685, 27689]\t\n    \t\t              Mantle   UP\t[19616, 19873, 19874, 19882]\t\n    \t\t          VipMonitor   UP\t[22311, 22312, 22313, 22314, 22318]\t\n    \t\t            Stargate   UP\t[20732, 20844, 20845, 20853, 20854]\t\n    \t\tInsightsDataTransfer   UP\t[21521, 21609, 21610, 21651, 21652, 21654, 21657, 21659, 21660]\t\n    \t\t               Ergon   UP\t[21550, 21767, 21768, 21769, 22082]\t\n    \t\t             GoErgon   UP\t[21847, 21919, 21920, 21962]\t\n    \t\t             Cerebro   UP\t[21864, 22142, 22143, 22408]\t\n    \t\t             Chronos   UP\t[21928, 22348, 22349, 22375]\t\n    \t\t             Curator   UP\t[22404, 22625, 22626, 22704]\t\n    \t\t               Prism   UP\t[22631, 22850, 22851, 22865]\t\n    \t\t                Hera   UP\t[22852, 23014, 23015, 23016]\t\n    \t\t                 CIM   UP\t[22888, 23127, 23128, 23134, 23135]\t\n    \t\t        AlertManager   UP\t[23080, 23299, 23300, 23411]\t\n    \t\t            Arithmos   UP\t[23138, 23407, 23408, 23476]\t\n    \t\t             Catalog   UP\t[23481, 23626, 23627, 23628]\t\n    \t\t           Acropolis   UP\t[23581, 23740, 23741, 23742]\t\n    \t\t               Uhura   UP\t[23647, 23825, 23826, 23827]\t\n    \t\t   NutanixGuestTools   UP\t[23764, 23960, 23961, 23973, 24035]\t\n    \t\t          MinervaCVM   UP\t[24811, 24908, 24909, 24910, 25208]\t\n    \t\t       ClusterConfig   UP\t[24835, 25000, 25001, 25002, 25044]\t\n    \t\t         APLOSEngine   UP\t[24876, 25134, 25135, 25136]\t\n    \t\t               APLOS   UP\t[25333, 25522, 25523, 25524]\t\n    \t\t     PlacementSolver   UP\t[25404, 25593, 25594, 25595, 25616]\t\n    \t\t               Lazan   UP\t[25494, 25741, 25742, 25743]\t\n    \t\t             Polaris   UP\t[25628, 25935, 25936, 25964]\t\n    \t\t              Delphi   UP\t[25886, 26101, 26102, 26103, 26157]\t\n    \t\t            Security   UP\t[25973, 26247, 26248, 26249]\t\n    \t\t                Flow   UP\t[26059, 26352, 26353, 26354, 26375]\t\n    \t\t             Anduril   UP\t[26205, 26500, 26501, 26502, 26522]\t\n    \t\t               XTrim   UP\t[26363, 26595, 26596, 26597]\t\n    \t\t       ClusterHealth   UP\t[26679, 26775, 27021, 27022, 27030, 27036, 27095, 27096, 27101, 27103, 27104, 27125, 27126, 27128, 27136, 27137, 27138, 27139, 27140, 27142, 27226, 27227, 27251, 27252, 27253, 27254, 27257, 27258, 29422, 29423, 29425, 29426, 29428, 29429, 29430, 29431, 29433, 29434, 29435, 29436, 29451, 29453, 29528, 29531]\t\n    2024-04-05 12:48:17,004Z INFO MainThread cluster:3104 Success!\n    \n    \n    \n\nüìã Copy\n\nName the cluster (Optional)\n    \n    \n     ncli cluster edit-params new-name=ntnx01\n\nüìã Copy\n\nAdd at least 1 DNS server\n    \n    \n    ncli cluster add-to-name-servers servers=192.168.10.250\n\nüìã Copy\n\n## VMware Config\n\nAs I wanted to add the Nutanix Hosts into my vCenter one step I needed to do was enable EVC. To do this no running VM‚Äôs can be present on the host.\n\nLog into one of the CVM‚Äôs I executed a ‚ÄúCluster Stop‚Äù command when the cluster is stopped shut all the CVM‚Äôs down.\n\nWhen the CVM‚Äôs were shut down. The 3 ESXi hosts were placed in maintenance mode before adding to an existing vSphere cluster This had the correct EVC mode that I needed. Once this is done the CVM‚Äôs can be booted again and the Nutanix cluster starting with a ‚ÄúCluster Start‚Äù command\n\n### Distributed Switch\n\nI also wanted to use DVswitch within VMware so a network migration was performed.\n\n## Nutanix Further Configuration\n\nThe next steps are to deploy Prism Central and I also want to Increase the RAM in the CVM‚Äôs. I will address this in a separate post.\n\n## The finished result\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/07/IMG_6628-1-1024x372.jpeg)\n\nThe Nutanix Nodes are the first three nodes of the lower unit. The fourth is just blanks.\n\n![](https://jameskilby.co.uk/wp-content/uploads/2024/07/Screenshot-2024-07-02-at-08.56.49-1.png)\n\n## Similar Posts\n\n  * [ ![How I Migrated from Pocket to Hoarder with AI Integration](https://jameskilby.co.uk/wp-content/uploads/2025/01/Screenshot-2025-01-29-at-23.30.47-768x411.png) ](https://jameskilby.co.uk/2025/01/how-i-migrated-from-pocket-to-hoarder-and-introduced-some-ai-along-the-way/)\n\n[Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Docker](https://jameskilby.co.uk/category/docker/) | [Hosting](https://jameskilby.co.uk/category/hosting/)\n\n### [How I Migrated from Pocket to Hoarder with AI Integration](https://jameskilby.co.uk/2025/01/how-i-migrated-from-pocket-to-hoarder-and-introduced-some-ai-along-the-way/)\n\nBy[James](https://jameskilby.co.uk) January 29, 2025January 18, 2026\n\nUpdate: Hoarder has now been renamed to Karakeep due to a trademark issue I‚Äôve been on a mission recently to regain control of my data. I haven‚Äôt yet faced the humongous task of moving my main email from Gmail, but I have had some successes with other cloud services and a win is a win‚Ä¶‚Ä¶.\n\n  * [ ![Wa](https://jameskilby.co.uk/wp-content/uploads/2025/04/210902461-012e7273-413a-4ec7-be44-e854347f5a21-768x180.png) ](https://jameskilby.co.uk/2025/04/warp-the-intelligent-terminal/)\n\n[Artificial Intelligence](https://jameskilby.co.uk/category/artificial-intelligence/) | [Homelab](https://jameskilby.co.uk/category/homelab/)\n\n### [Warp ‚Äì The intelligent terminal](https://jameskilby.co.uk/2025/04/warp-the-intelligent-terminal/)\n\nBy[James](https://jameskilby.co.uk) April 11, 2025October 3, 2025\n\nHow Warp is helping me run my homelab. \n\n  * [ ![Lab Update ‚Äì Part 2 Storage Truenas Scale](https://jameskilby.co.uk/wp-content/uploads/2022/01/maxresdefault-768x432.jpeg) ](https://jameskilby.co.uk/2022/01/lab-update-part-2-storage/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/)\n\n### [Lab Update ‚Äì Part 2 Storage Truenas Scale](https://jameskilby.co.uk/2022/01/lab-update-part-2-storage/)\n\nBy[James](https://jameskilby.co.uk) January 11, 2022December 11, 2023\n\nThe HP Z840 has changed its role to a permanent storage box running Truenas Scale. This is in addition to my Synology DS918+ TrueNas is the successor to FreeNas a very popular BSD based StorageOS and TrueNas scale is a fork of this based on Linux. The Synology has been an amazing piece of kit‚Ä¶\n\n  * [ ![Nutanix NCP](https://jameskilby.co.uk/wp-content/uploads/2020/07/nutanix-logo-HI-REZ_reverse-w-carrier-768x196.jpg) ](https://jameskilby.co.uk/2020/07/nutanix-ncp/)\n\n[Nutanix](https://jameskilby.co.uk/category/nutanix/) | [Personal](https://jameskilby.co.uk/category/personal/)\n\n### [Nutanix NCP](https://jameskilby.co.uk/2020/07/nutanix-ncp/)\n\nBy[James](https://jameskilby.co.uk) July 2, 2020July 10, 2024\n\nI saw a tweet a couple of weeks ago mentioning that Nutanix were offering a free go at the Nutanix Certified Professional exam. They are also offering free on-demand training to go with it. In my current role, I haven‚Äôt used Nutanix however I have good experience using it as the storage platform with vSphere‚Ä¶\n\n  * [ ![TrueNAS Logo](https://jameskilby.co.uk/wp-content/uploads/2023/05/Screenshot-2023-05-22-at-18.49.21-768x198.png) ](https://jameskilby.co.uk/2023/05/homelab-storage-refresh-part-1/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Storage](https://jameskilby.co.uk/category/storage/)\n\n### [Homelab Storage Refresh (Part 1)](https://jameskilby.co.uk/2023/05/homelab-storage-refresh-part-1/)\n\nBy[James](https://jameskilby.co.uk) May 23, 2023October 1, 2025\n\nTable of Contents Background ZFS Overview Read Cache (ARC and L2ARC) ZIL (ZFS Intent Log) Hardware Background I have just completed the move of all my production and media-based storage/services to TrueNAS Scale. ( I will just refer to this as TrueNAS) This is based on my HP Z840 and I have now retired my‚Ä¶\n\n  * [ ![Nvidia Tesla P4 Homelab Setup](https://jameskilby.co.uk/wp-content/uploads/2023/10/IMG_1107-768x403-1.jpg) ](https://jameskilby.co.uk/2023/10/vgpu-setup-in-my-homelab/)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n### [Nvidia Tesla P4 Homelab Setup](https://jameskilby.co.uk/2023/10/vgpu-setup-in-my-homelab/)\n\nBy[James](https://jameskilby.co.uk) October 23, 2023July 10, 2024\n\nA little while ago I decided to play with vGPU in my homelab. This was something I had dabbled with in the past but never really had the time or need to get working properly. The first thing that I needed was a GPU. I did have a Dell T20 with an iGPU built into‚Ä¶",
  "excerpt": "![](https://jameskilby.co.uk/wp-content/uploads/2024/07/IMG_6629-scaled.jpeg)\n\n[Homelab](https://jameskilby.co.uk/category/homelab/) | [Nutanix](https://jameskilby.co.uk/category/nutanix/) | [VMware](https://jameskilby.co.uk/category/vmware/)\n\n# New Nodes\n\nBy[James](https://jameskilby.co.uk) July 2,..."
}