/* Brutalist Dark Theme - Inspired by justfuckingusecloudflare.com */

/* Import local fonts */
@import url('/assets/fonts/fonts.css');

/* Root variables and noise overlay */
:root {
  --bg-dark: #0a0a0a;
  --text-light: #fafafa;
  --accent-orange: #f6821f;
  --gray-mid: #404040;
  --gray-light: #666666;
}

/* Apply noise texture to body */
body {
  background-color: var(--bg-dark) !important;
  color: var(--text-light) !important;
  font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
  line-height: 1.6;
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 9999;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* Mobile optimization: reduce noise overlay GPU impact */
@media (max-width: 768px) {
  body::before {
    opacity: 0.02; /* Lighter on mobile */
    will-change: auto; /* Remove GPU acceleration hint */
  }
}

/* Optional: disable on small/slow mobile devices to save battery and improve performance */
@media (max-width: 480px) and (prefers-reduced-motion: reduce) {
  body::before {
    display: none; /* Completely remove for accessibility and low-end devices */
  }
}

/* Disable noise on very small screens or when user prefers reduced data */
@media (max-width: 375px) {
  body::before {
    opacity: 0.015; /* Very subtle on small screens */
  }
}

/* Typography */
h1, h2, h3, h4, h5, h6,
.site-title,
.entry-title {
  font-family: 'Anton', sans-serif !important;
  font-weight: 400 !important;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--text-light) !important;
}

h1, .site-title { font-size: 3rem !important; }
h2, .entry-title { font-size: 2.25rem !important; }
h3 { font-size: 1.75rem !important; }
h4 { font-size: 1.5rem !important; }

/* Code blocks */
code, pre, .wp-block-code {
  font-family: 'JetBrains Mono', monospace !important;
  background-color: rgba(255, 255, 255, 0.05) !important;
  color: var(--accent-orange) !important;
  padding: 0.2em 0.4em;
  border-radius: 3px;
}

pre {
  padding: 1.5rem !important;
  overflow-x: auto;
  border: 1px solid var(--gray-mid);
}

/* Links */
a {
  color: var(--accent-orange) !important;
  text-decoration: none !important;
  transition: opacity 0.2s ease;
}

a:hover {
  opacity: 0.8;
  text-decoration: underline !important;
}

a:focus {
  outline: 2px solid var(--accent-orange);
  outline-offset: 2px;
}

/* Selection */
::selection {
  background-color: var(--accent-orange) !important;
  color: var(--bg-dark) !important;
}

::-moz-selection {
  background-color: var(--accent-orange) !important;
  color: var(--bg-dark) !important;
}

/* Header */
.site-header,
#masthead {
  background-color: var(--bg-dark) !important;
  border-bottom: 2px solid var(--gray-mid);
}

.site-branding .site-title a,
.site-title {
  color: var(--text-light) !important;
}

/* Navigation */
.main-navigation a,
.menu-item a {
  color: var(--text-light) !important;
  font-weight: 500;
  text-transform: uppercase;
  font-size: 0.9rem;
  letter-spacing: 0.05em;
}

.menu-item a:hover {
  color: var(--accent-orange) !important;
}

/* Content areas */
.content-bg,
.entry,
article {
  background-color: rgba(255, 255, 255, 0.02) !important;
  border: 1px solid var(--gray-mid) !important;
  border-radius: 0 !important;
}

/* Post grid */
.kadence-posts-list.grid-cols {
  gap: 2rem;
}

.entry-list-item {
  background: transparent;
}

/* Post content */
.entry-content,
.entry-summary,
.entry-header {
  color: var(--text-light) !important;
}

.entry-summary p,
.entry-content p {
  color: var(--gray-light) !important;
  line-height: 1.7;
}

/* Meta information */
.entry-meta,
.posted-by,
.posted-on,
.category-links,
.tag-links {
  color: var(--gray-light) !important;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.entry-meta a {
  color: var(--gray-light) !important;
}

.entry-meta a:hover {
  color: var(--accent-orange) !important;
}

/* Categories and tags */
.category-links a,
.tag-links a {
  background-color: transparent !important;
  border: 1px solid var(--gray-mid) !important;
  color: var(--text-light) !important;
  padding: 0.5rem 0.875rem;
  border-radius: 0;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  display: inline-flex;
  align-items: center;
  min-height: 44px;
  box-sizing: border-box;
}

.category-links a:hover,
.tag-links a:hover {
  background-color: var(--accent-orange) !important;
  border-color: var(--accent-orange) !important;
  color: var(--bg-dark) !important;
}

/* Buttons */
.post-more-link,
button,
.wp-block-button__link {
  background-color: transparent !important;
  color: var(--accent-orange) !important;
  border: 2px solid var(--accent-orange) !important;
  padding: 0.75rem 1.5rem !important;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  font-weight: 700;
  font-size: 0.9rem;
  border-radius: 0 !important;
  transition: all 0.2s ease;
  cursor: pointer;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
}

.post-more-link:hover,
button:hover,
.wp-block-button__link:hover {
  background-color: var(--accent-orange) !important;
  color: var(--bg-dark) !important;
}

/* Images */
img {
  border: 1px solid var(--gray-mid);
  max-width: 100%;
  height: auto;
  display: block;
}

/* Prevent CLS by reserving aspect-ratio space */
.post-thumbnail img,
.wp-post-image {
  aspect-ratio: attr(width) / attr(height); /* Modern browsers */
  width: 100%;
  height: auto;
}

/* Fallback for older browsers - reserve space for 2:3 thumbnail ratio */
.post-thumbnail-inner {
  position: relative;
  background-color: transparent !important;
  min-height: 0; /* Prevents collapsing */
}

/* Kadence uses 2:3 ratio for thumbnails */
.kadence-thumbnail-ratio-2-3 .post-thumbnail-inner {
  /* Remove fixed aspect ratio to let images display at their natural proportions */
  overflow: hidden;
}

.kadence-thumbnail-ratio-2-3 .post-thumbnail-inner img {
  /* Let images display at natural size without cropping */
  width: 100%;
  height: auto;
  display: block;
}

/* Smooth image loading */
.post-thumbnail img {
  transition: opacity 0.3s ease;
}

.post-thumbnail:hover img {
  opacity: 0.85;
}

/* Featured/Post thumbnail - keep default positioning */
.post-thumbnail,
.article-post-thumbnail {
  margin-bottom: 0 !important;
}

/* Ensure entry content wrap has proper dark background so text is readable over images */
.entry-content-wrap {
  background-color: var(--bg-dark) !important;
  position: relative !important;
  min-height: 200px; /* Prevent CLS by reserving space before content loads */
}

/* Make sure the header has a solid background if it overlaps the image */
.entry-header,
.post-title {
  background-color: var(--bg-dark) !important;
  padding: 1.5rem !important;
  margin: 0 !important;
}

/* Entry content should have proper background */
.entry-content,
.single-content {
  background-color: var(--bg-dark) !important;
  padding: 1.5rem !important;
}

/* Footer */
.site-footer,
#colophon {
  background-color: var(--bg-dark) !important;
  border-top: 2px solid var(--gray-mid);
  color: var(--gray-light) !important;
  margin-top: 4rem;
  padding: 2rem 0;
}

/* Forms */
input[type="text"],
input[type="email"],
input[type="search"],
textarea {
  background-color: rgba(255, 255, 255, 0.05) !important;
  border: 1px solid var(--gray-mid) !important;
  color: var(--text-light) !important;
  padding: 0.75rem;
  border-radius: 0;
}

input:focus,
textarea:focus {
  outline: 2px solid var(--accent-orange);
  outline-offset: 2px;
  border-color: var(--accent-orange) !important;
}

/* Mobile header */
#mobile-header,
.site-mobile-header-wrap {
  background-color: var(--bg-dark) !important;
}

.site-mobile-header-wrap .site-header-row-container-inner,
.site-mobile-header-wrap .site-container,
.site-mobile-header-wrap .site-header-row {
  background-color: var(--bg-dark) !important;
}

/* Mobile menu toggle button - high specificity to override Kadence */
#mobile-header .mobile-toggle-open-container button,
#mobile-header .menu-toggle-open,
.site-mobile-header-wrap .mobile-toggle-open-container button,
.site-mobile-header-wrap .menu-toggle-open,
.mobile-toggle-open-container button.menu-toggle-open,
button.menu-toggle-open.drawer-toggle {
  background: var(--bg-dark) !important;
  background-color: var(--bg-dark) !important;
  border: 2px solid var(--text-light) !important;
  color: var(--text-light) !important;
  min-width: 44px;
  min-height: 44px;
  box-shadow: none !important;
}

/* Ensure the SVG icon inside burger menu is visible */
#mobile-header .menu-toggle-open .kadence-svg-icon,
#mobile-header .menu-toggle-open svg,
.menu-toggle-open .kadence-svg-icon,
.menu-toggle-open svg {
  fill: var(--text-light) !important;
  color: var(--text-light) !important;
}

#mobile-header .menu-toggle-open:hover,
#mobile-header .menu-toggle-open:focus,
.site-mobile-header-wrap .menu-toggle-open:hover,
.site-mobile-header-wrap .menu-toggle-open:focus,
.mobile-toggle-open-container .menu-toggle-open:hover,
.mobile-toggle-open-container .menu-toggle-open:focus,
.mobile-toggle-open-container .menu-toggle-open:focus-visible {
  background: var(--bg-dark) !important;
  background-color: var(--bg-dark) !important;
  border-color: var(--accent-orange) !important;
  color: var(--accent-orange) !important;
  outline: none !important;
  box-shadow: none !important;
}

#mobile-header .menu-toggle-open:hover .kadence-svg-icon,
#mobile-header .menu-toggle-open:focus .kadence-svg-icon,
.menu-toggle-open:hover .kadence-svg-icon,
.menu-toggle-open:focus .kadence-svg-icon {
  fill: var(--accent-orange) !important;
  color: var(--accent-orange) !important;
}

/* Mobile drawer menu */
#mobile-drawer,
.popup-drawer,
.mobile-drawer-content {
  background-color: var(--bg-dark) !important;
}

.popup-drawer .drawer-inner,
.popup-drawer .drawer-content {
  background-color: var(--bg-dark) !important;
  border-left: 2px solid var(--gray-mid);
}

.popup-drawer .drawer-header {
  background-color: var(--bg-dark) !important;
  border-bottom: 1px solid var(--gray-mid);
  padding: 1rem 1.5rem;
}

/* Mobile drawer close button */
.menu-toggle-close,
.drawer-toggle.menu-toggle-close {
  background-color: transparent !important;
  border: 1px solid var(--gray-mid) !important;
  color: var(--text-light) !important;
  min-width: 44px;
  min-height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.menu-toggle-close:hover,
.menu-toggle-close:focus {
  border-color: var(--accent-orange) !important;
  color: var(--accent-orange) !important;
}

/* Mobile drawer navigation links */
.popup-drawer .menu,
.mobile-drawer-content .menu {
  background-color: var(--bg-dark) !important;
  padding: 0;
  margin: 0;
  list-style: none;
}

.popup-drawer .menu-item,
.mobile-drawer-content .menu-item {
  border-bottom: 1px solid var(--gray-mid);
}

.popup-drawer .menu-item a,
.mobile-drawer-content .menu-item a {
  color: var(--text-light) !important;
  padding: 1rem 1.5rem !important;
  display: block !important;
  min-height: 44px;
  font-size: 1rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-decoration: none !important;
}

.popup-drawer .menu-item a:hover,
.popup-drawer .menu-item a:focus,
.mobile-drawer-content .menu-item a:hover,
.mobile-drawer-content .menu-item a:focus {
  background-color: rgba(246, 130, 31, 0.1) !important;
  color: var(--accent-orange) !important;
}

/* Mobile drawer overlay/backdrop */
.drawer-overlay {
  background-color: rgba(0, 0, 0, 0.8) !important;
}

/* Kadence-specific mobile drawer classes */
.mobile-navigation,
.mobile-navigation-content {
  background-color: var(--bg-dark) !important;
}

.mobile-navigation .menu-item a {
  color: var(--text-light) !important;
  padding: 1rem 1.5rem !important;
  min-height: 44px;
  display: flex;
  align-items: center;
}

.mobile-navigation .menu-item a:hover {
  color: var(--accent-orange) !important;
  background-color: rgba(246, 130, 31, 0.1) !important;
}

/* Pagination */
.pagination a,
.page-numbers {
  background-color: transparent !important;
  border: 1px solid var(--gray-mid) !important;
  color: var(--text-light) !important;
  padding: 0.5rem 1rem;
  margin: 0 0.25rem;
}

.pagination a:hover,
.page-numbers:hover,
.page-numbers.current {
  background-color: var(--accent-orange) !important;
  border-color: var(--accent-orange) !important;
  color: var(--bg-dark) !important;
}

/* Post navigation (prev/next) */
.post-navigation,
.navigation,
.nav-links {
  background-color: transparent !important;
  padding: 2rem 0 !important;
  border-top: 1px solid var(--gray-mid) !important;
  margin-top: 3rem !important;
}

.post-navigation a,
.navigation a {
  background-color: rgba(255, 255, 255, 0.02) !important;
  border: 1px solid var(--gray-mid) !important;
  padding: 1.5rem !important;
  display: block !important;
  color: var(--text-light) !important;
}

.post-navigation a:hover,
.navigation a:hover {
  background-color: rgba(255, 255, 255, 0.05) !important;
  border-color: var(--accent-orange) !important;
}

.post-navigation-sub,
.nav-previous,
.nav-next {
  background-color: transparent !important;
}

.post-navigation-sub small {
  color: var(--gray-light) !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  font-size: 0.75rem !important;
}

/* Blockquotes */
blockquote {
  border-left: 4px solid var(--accent-orange) !important;
  background-color: rgba(255, 255, 255, 0.02) !important;
  padding: 1rem 1.5rem;
  margin: 1.5rem 0;
  color: var(--text-light) !important;
  font-style: italic;
}

/* Tables */
table {
  border: 1px solid var(--gray-mid) !important;
  background-color: rgba(255, 255, 255, 0.02) !important;
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border: 1px solid var(--gray-mid) !important;
  padding: 0.75rem;
  color: var(--text-light) !important;
}

th {
  background-color: rgba(255, 255, 255, 0.05) !important;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 0.9rem;
}

/* Striped tables */
.is-style-stripes tbody tr:nth-child(odd) {
  background-color: rgba(255, 255, 255, 0.08) !important;
}

.is-style-stripes tbody tr:nth-child(even) {
  background-color: rgba(255, 255, 255, 0.02) !important;
}

/* Ensure table text is always readable */
.is-style-stripes td,
.is-style-stripes th {
  color: var(--text-light) !important;
}

/* Responsive adjustments */

/* Tablets and large phones (≤768px) */
@media (max-width: 768px) {
  h1, .site-title { font-size: 2rem !important; }
  h2, .entry-title { font-size: 1.5rem !important; }
  h3 { font-size: 1.25rem !important; }
  
  .kadence-posts-list.grid-cols {
    gap: 1rem;
  }
}

/* Standard phones (≤480px) */
@media (max-width: 480px) {
  h1, .site-title { font-size: 1.75rem !important; }
  h2, .entry-title { font-size: 1.25rem !important; }
  h3 { font-size: 1.125rem !important; }
  h4 { font-size: 1rem !important; }

  /* Reduce spacing for more content above fold */
  .kadence-posts-list.grid-cols {
    gap: 0.75rem;
  }

  /* Buttons - maintain 44px touch target */
  .post-more-link,
  button,
  .wp-block-button__link {
    padding: 0.625rem 1.25rem !important;
    font-size: 0.875rem !important;
    min-height: 44px !important;
  }

  /* Category/tag links - maintain 44px touch target */
  .category-links a,
  .tag-links a {
    padding: 0.5rem 0.75rem !important;
    font-size: 0.7rem !important;
    min-height: 44px !important;
  }

  /* Tighter entry content */
  .entry-header,
  .entry-content {
    padding: 1rem !important;
  }

  /* Smaller meta text */
  .entry-meta {
    font-size: 0.8rem !important;
  }
}

/* Small phones (≤375px - iPhone SE, iPhone 13 mini) */
@media (max-width: 375px) {
  h1, .site-title { font-size: 1.5rem !important; }
  h2, .entry-title { font-size: 1.125rem !important; }
  h3 { font-size: 1rem !important; }
  h4 { font-size: 0.9rem !important; }

  /* Even tighter spacing for small screens */
  .kadence-posts-list.grid-cols {
    gap: 0.5rem;
  }

  /* Compact buttons - maintain 44px touch target */
  .post-more-link,
  button,
  .wp-block-button__link {
    padding: 0.5rem 1rem !important;
    font-size: 0.8rem !important;
    min-height: 44px !important;
  }

  /* Compact padding */
  .entry-header,
  .entry-content {
    padding: 0.75rem !important;
  }

  /* Even smaller meta text */
  .entry-meta {
    font-size: 0.75rem !important;
  }

  /* Reduce line height slightly for readability */
  body {
    line-height: 1.5 !important;
  }

  /* Category/tag badges - maintain 44px touch target */
  .category-links a,
  .tag-links a {
    padding: 0.4rem 0.6rem !important;
    font-size: 0.65rem !important;
    min-height: 44px !important;
  }
}

/* Content freshness indicator */
.content-freshness-indicator {
  background: rgba(255, 255, 255, 0.05) !important;
  border-left: 4px solid var(--accent-orange) !important;
  color: var(--text-light) !important;
  border-radius: 0 !important;
  padding: 1rem 1.5rem !important;
  margin: 1.5rem 0 !important;
}

.content-freshness-indicator strong {
  color: var(--text-light) !important;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-size: 0.85rem;
}

.content-freshness-indicator time {
  color: var(--gray-light) !important;
}

.content-freshness-indicator span {
  color: var(--text-light) !important;
}

/* Smooth transitions - applied only to interactive elements for better performance */
a,
button,
.post-more-link,
.wp-block-button__link,
.category-links a,
.tag-links a,
.post-thumbnail img,
.menu-item a,
.page-numbers,
.pagination a,
.post-navigation a,
.navigation a,
input,
textarea {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, opacity 0.2s ease;
}

/* Override any white backgrounds */
.wp-site-blocks,
#wrapper,
.site,
.content-area,
.site-container,
.site-footer-wrap,
.site-bottom-footer-wrap,
.footer-widget-area,
.site-info,
footer,
#colophon,
.carousel,
.slider,
.slick-slider,
.splide,
.swiper,
.wp-block-gallery,
.blocks-gallery-grid,
.navigation,
.post-navigation,
.pagination-wrap,
.content-wrap,
main,
#main,
#inner-wrap,
.wrap {
  background-color: var(--bg-dark) !important;
}

/* Ensure all divs and sections have dark background by default */
div, section, aside, nav {
  background-color: transparent !important;
}

/* Specific overrides for white/light colored elements */
.has-white-background-color,
.has-white-background,
[style*="background-color: white"],
[style*="background-color: #fff"],
[style*="background-color: #ffffff"],
[style*="background: white"],
[style*="background: #fff"],
[style*="background: #ffffff"] {
  background-color: var(--bg-dark) !important;
  background: var(--bg-dark) !important;
}
